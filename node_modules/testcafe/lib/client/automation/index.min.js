window["%hammerhead%"].utils.removeInjectedScript(),function cu(hu){var fu=hu.document;!function(e,g,i,u){var m="default"in e?e.default:e,y="default"in g?g.default:g;i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u;var c={},o=y.positionUtils,r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function t(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function h(e,s,l,a){return new(l=l||u)(function(n,t){function i(e){try{r(a.next(e))}catch(e){t(e)}}function o(e){try{r(a.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(i,o)}r((a=a.apply(e,s||[])).next())})}function S(n,i){var o,r,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,r=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){l.label=t[1];break}if(6===t[0]&&l.label<s[1]){l.label=s[1],s=t;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(t);break}s[2]&&l.ops.pop(),l.trys.pop();continue}t=i.call(n,l)}catch(e){t=[6,e],r=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var f=m.utils.browser,n=(s.prototype.setup=function(){this.dragAndDropMode=!1,this.dropAllowed=!1},s.prototype.leaveElement=function(){},s.prototype.move=function(){},s.prototype.enterElement=function(){},s.prototype.dragAndDrop=function(){},s.prototype.teardown=function(){},s.prototype.run=function(e,t,n,i,o){var r=t&&g.domUtils.isElementInDocument(t),s=t&&g.domUtils.isElementInIframe(t)&&!g.domUtils.getIframeByElement(t);r&&!s||(t=null);var l=e!==t,a=l?g.domUtils.getCommonAncestor(e,t):null;this.setup(),l&&t&&this.leaveElement(e,t,a,n),f.isIE&&this.move(e,n),l&&g.domUtils.isElementInDocument(e)&&this.enterElement(e,t,a,n),f.isIE||this.move(e,n),this.dragAndDrop(i,e,t,n,o),this.teardown(e,n,t);var u=this.dragAndDropMode,c=this.dropAllowed;return this.dragAndDropMode=!1,this.dropAllowed=!1,{dragAndDropMode:u,dropAllowed:c}},s);function s(e){var t=e.moveEvent;this.dragAndDropMode=!1,this.dropAllowed=!1,this.moveEvent=t}var l=m.eventSandbox.eventSimulator,a=m.utils.extend,d=m.nativeMethods,p=(v.leaveElement=function(e,t,n,i){l.mouseout(t,a({relatedTarget:e},i));for(var o=t;o&&o!==n;)l.mouseleave(o,a({relatedTarget:e},i)),o=d.nodeParentNodeGetter.call(o)},v.enterElement=function(e,t,n,i){l.mouseover(e,a({relatedTarget:t},i));for(var o=e,r=[];o&&o!==n;)r.push(o),o=g.domUtils.getParentExceptShadowRoot(o);for(var s=r.length-1;-1<s;s--)l.mouseenter(r[s],a({relatedTarget:t},i))},v.move=function(e,t,n){l[e](t,n)},v);function v(){}var E=(b.dragAndDrop=function(e,t,n,i){return l.drag(e,i),t!==n&&(g.domUtils.isElementInDocument(t)&&(i.relatedTarget=n,l.dragenter(t,i)),n&&(i.relatedTarget=t,l.dragleave(n,i))),!l.dragover(t,i)},b);function b(){}var _,w=m.eventSandbox.eventSimulator,P=(t(C,_=n),C.prototype.leaveElement=function(e,t,n,i){p.leaveElement(e,t,n,i)},C.prototype.enterElement=function(e,t,n,i){p.enterElement(e,t,n,i)},C.prototype.move=function(e,t){this._needEmulateMoveEvent()&&p.move(this.moveEvent,e,t)},C.prototype.teardown=function(e,t,n){this._needEmulateMoveEvent()&&g.domUtils.isElementInDocument(e)&&e!==n&&w[this.moveEvent](e,t)},C.prototype._needEmulateMoveEvent=function(){return"touchmove"!==this.moveEvent||this.holdLeftButton},C);function C(e){var t=_.call(this,e)||this;return t.holdLeftButton=e.holdLeftButton,t}var A,x=(t(T,A=n),T.prototype.setup=function(){A.prototype.setup.call(this),this.dragAndDropMode=!0},T.prototype.dragAndDrop=function(e,t,n,i){this.dropAllowed=E.dragAndDrop(e,t,n,i)},T);function T(){return null!==A&&A.apply(this,arguments)||this}var U,M=m.eventSandbox.eventSimulator,D=(t(I,U=n),I.prototype.setup=function(){U.prototype.setup.call(this),this.dragAndDropMode=!0},I.prototype.leaveElement=function(e,t,n,i){p.leaveElement(e,t,n,i)},I.prototype.move=function(e,t){p.move(this.moveEvent,e,t)},I.prototype.enterElement=function(e,t,n,i){p.enterElement(e,t,n,i)},I.prototype.dragAndDrop=function(e,t,n,i,o){var r=M.dragstart(e,i);o.setReadOnlyMode(),r?this.dropAllowed=E.dragAndDrop(e,t,n,i):this.dragAndDropMode=!1},I.prototype.run=function(e,t,n,i,o){return U.prototype.run.call(this,e,null,n,i,o)},I);function I(){return null!==U&&U.apply(this,arguments)||this}function k(e,t,n){return new(e?t?x:D:P)(n)}var B=m.nativeMethods,O=m.Promise,N=m.utils,F=N.browser,K=N.featureDetection,Y=y.domUtils,L=y.positionUtils,V=y.ScrollAutomation;!function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];c[i]=e[i]}}({PromiseCtor:O,nativeMethods:B,scroll:function(e,t){return new V(e,t).run()},getElementExceptUI:function(t,n){return void 0===n&&(n=!1),i.hide(n).then(function(){var e=o.getElementFromPoint(t.x,t.y);return i.show(n).then(function(){return e})})},dom:Y,position:L,style:y.styleUtils,event:y.eventUtils,browser:F,featureDetection:K,createEventSequence:k,sendRequestToFrame:y.sendRequestToFrame});var X=m.nativeMethods,R=/^((mouse\w+)|((dbl)?click)|(contextmenu))$/,W=/^((drag\w*)|(drop))$/,H=/^key\w+$/,G=/^(before)?input$/,q=/^(blur|(focus(in|out)?))$/,z=/^pointer\w+/,j={click:1,dblclick:2,mousedown:1,mouseup:1},$="MouseEvent",Z="PointerEvent",J="KeyboardEvent",Q="InputEvent",ee="FocusEvent",te=(ne.prototype.run=function(){var e=this.options,t=e.bubbles,n=e.cancelable,i=e.detail,o=(e.view,e.buttons),t=!1!==t,n=!1!==n,i=i||j[this.eventName],o=void 0===o?1:o;Object.assign(this.options,{bubbles:t,cancelable:n,detail:i,view:hu,buttons:o});var r,s=ne._getEventCtorByEventType(this.eventName,this.options.eventConstructor);s&&(r=new s(this.eventName,this.options),this.element.dispatchEvent(r))},ne._getEventCtorByEventType=function(e,t){if(t&&"function"==typeof ne._getEventCtorFromWindow(t)){var n=ne._getEventCtorFromNativeMethods(t);if(n&&"function"==typeof n)return n}return R.test(e)||W.test(e)?ne._getEventCtorFromNativeMethods($):z.test(e)?ne._getEventCtorFromNativeMethods(Z):H.test(e)?ne._getEventCtorFromNativeMethods(J):G.test(e)?ne._getEventCtorFromNativeMethods(Q):q.test(e)?ne._getEventCtorFromNativeMethods(ee):ne._getEventCtorFromNativeMethods("CustomEvent")},ne._getEventCtorFromNativeMethods=function(e){return X["Window"+e]||ne._getEventCtorFromWindow(e)},ne._getEventCtorFromWindow=function(e){return hu[e]},ne);function ne(e,t,n){this.element=e,this.eventName=t,this.options=n}var ie=m.utils.browser;function oe(e,t,n){var i=ie.isFirefox?Math.ceil:Math.round,o=g.positionUtils.getOffsetPosition(e,i);return{x:(e===fu.documentElement?0:o.left)+t,y:(e===fu.documentElement?0:o.top)+n}}function re(e){if(!e)return null;var t=hu.screenLeft||hu.screenX,n=hu.screenTop||hu.screenY;return{x:t+e.x,y:n+e.y}}function se(e){var t=e/2;return t<1?0:Math.round(t)}function le(e){var t=g.positionUtils.getElementRectangle(e);return{offsetX:se(t.width),offsetY:se(t.height)}}function ae(e,t,n){var i=le(e);if(t="number"==typeof t?Math.round(t):i.offsetX,n="number"==typeof n?Math.round(n):i.offsetY,0<t&&0<n)return{offsetX:t,offsetY:n};var o=g.positionUtils.getClientDimensions(e),r=Math.round(Math.max(e.scrollWidth,o.width)),s=Math.round(Math.max(e.scrollHeight,o.height)),l=o.scrollbar.right+o.border.left+o.border.right+r,a=o.scrollbar.bottom+o.border.top+o.border.bottom+s;return{offsetX:t<0?l+t:t,offsetY:n<0?a+n:n}}function ue(e){return e.top!==e}var ce=m.utils.browser,he=m.Promise,fe=m.nativeMethods,de=y.positionUtils,me=y.domUtils;function pe(e,t){var n=null;return i.hide(t).then(function(){return n=de.getElementFromPoint(e.x,e.y),i.show(t)}).then(function(){return n})}function ve(e,t,n){var i=de.getElementFromPoint(e,t),o=me.containsElement(n,i)&&fe.nodeTextContentGetter.call(i).length;return i&&i===n||o?i:null}function ge(e,t){if(!t||!me.isDomElement(t)||!e||e===t)return e;if("tref"===me.getTagName(t))return t;var n,i,o,r="area"===me.getTagName(t)&&me.isImgElement(e);if(ce.isFirefox&&r)return n=e,i=t,(o=me.closest(i,"map"))&&o.name===n.useMap.substring(1)?i:n;var s=me.isAnchorElement(t)||me.getParents(t,"a").length,l=s&&me.containsElement(t,e)&&fe.nodeTextContentGetter.call(e).length;if(!s||l||!fe.nodeTextContentGetter.call(t).length)return e;var a=t.getBoundingClientRect();return ve(a.right-1,a.top+1,t)||ve(a.left+1,a.bottom-1,t)||e}function Ee(i,o){return pe(i).then(function(e){var t=e,n=he.resolve(e);return!t&&ue(hu)&&0<i.x&&0<i.y&&(n=n.then(function(){return pe(i,!0)}).then(function(e){return e})),n.then(function(e){return ge(e,o)})})}var ye={elementIsInvisibleError:"elementIsInvisibleError",foundElementIsNotTarget:"foundElementIsNotTarget"},Se=(Object.defineProperty(be.prototype,"mouseActionStepDelay",{get:function(){return 1===this._speedFactor?10:400*(1-this._speedFactor)},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"keyActionStepDelay",{get:function(){return 1===this._speedFactor?10:200*(1-this._speedFactor)},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"cursorSpeed",{get:function(){return Math.pow(400,this._speedFactor)/4},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"draggingSpeed",{get:function(){return Math.pow(16,this._speedFactor)/4},enumerable:!1,configurable:!0}),be);function be(e){this._speedFactor=e||1}var _e=(we.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},we.prototype._assignFrom=function(e,t,n){if(void 0===n&&(n={}),e)for(var i=this._getAssignableProperties(),o=0;o<i.length;o++){for(var r,s=i[o],l=s.name,a=s.type,u=s.required,c=s.init,h=s.defaultValue,f=l.split("."),d=f.length-1,m=f[d],p=e,v=this,g=0;g<d&&p&&v;g++)p=p[f[g]],v=v[f[g]];v&&"defaultValue"in i[o]&&(v[l]=h),p&&v&&(void 0===(r=p[m])&&!u||(t&&a&&a(l,r),v[m]=c?c(l,r,n,t):r))}},we);function we(){}function Pe(i){return function(e,t){var n=typeof t;if("number"!=n)throw new i(e,n);if(isNaN(t)||!isFinite(t)||t!==Math.floor(t))throw new i(e,t)}}function Ce(e,t){this.code=e,this.isTestCafeError=!0,this.callsite=t||null}var Ae,xe,Te,Ue="E1",Me="E4",De="E5",Ie="E9",ke="E10",Be="E11",Oe="E12",Ne="E24",Fe="E26",Ke="E27",Ye="E28",Le="E29",Ve="E30",Xe="E31",Re="E32",We="E33",He="E34",Ge="E35",qe="E36",ze="E37",je="E39",$e="E40",Ze="E41",Je="E42",Qe="E43",et="E44",tt="E45",nt="E46",it="E49",ot="E50",rt="E51",st="E52",lt="E57",at="E64",ut="E65",ct="E68",ht="E69",ft="E70",dt="E71",mt="E72",pt="E73",vt="E74",gt="E76",Et="E77",yt="E78",St="E82",bt="E83",_t=(t(wt,Ae=Ce),wt);function wt(e,t,n){var i=Ae.call(this,e)||this;return i.optionName=t,i.actualValue=n,i}function Pt(e,t){var n=xe.call(this,it,t)||this;return n.instantiationCallsiteName=e,n}function Ct(e,t){var n=Te.call(this,ot,t)||this;return n.instantiationCallsiteName=e,n}t(Pt,xe=Ce),t(Ct,Te=Ce);var At,xt,Tt,Ut,Mt,Dt,It,kt,Bt=(t(Ot,At=Ce),Ot);function Ot(e,t,n){var i=t.apiFnChain,o=t.apiFnIndex,r=At.call(this,e,n)||this;return r.apiFnChain=i,r.apiFnIndex=o,r}function Nt(e){return xt.call(this,rt,e)||this}function Ft(e,t){return Tt.call(this,st,t,e)||this}function Kt(e,t){var n=Ut.call(this,Ue)||this;return n.errStack=e,n.pageDestUrl=t,n}function Yt(e,t,n){var i=Mt.call(this,Me,n)||this;return i.errMsg=String(t),i.instantiationCallsiteName=e,i}function Lt(e,t,n,i){var o=Dt.call(this,De,i)||this;return o.errMsg=String(t),o.property=n,o.instantiationCallsiteName=e,o}function Vt(e){var t=It.call(this,at)||this;return t.errMsg=String(e),t}function Xt(e,t){var n=kt.call(this,ut)||this;return n.errMsg=String(e),n.moduleName=t,n}t(Nt,xt=Ce),t(Ft,Tt=Bt),t(Kt,Ut=Ce),t(Yt,Mt=Ce),t(Lt,Dt=Ce),t(Vt,It=Ce),t(Xt,kt=Ce);var Rt,Wt=(t(Ht,Rt=_t),Ht);function Ht(e,t){return Rt.call(this,Ie,e,t)||this}var Gt,qt=(t(zt,Gt=_t),zt);function zt(e,t){return Gt.call(this,ke,e,t)||this}var jt,$t=(t(Zt,jt=_t),Zt);function Zt(e,t){return jt.call(this,Be,e,t)||this}var Jt,Qt,en,tn,nn,on,rn,sn,ln,an,un,cn,hn,fn,dn,mn,pn,vn,gn,En,yn,Sn,bn,_n,wn,Pn,Cn,An,xn,Tn,Un,Mn,Dn,In,kn,Bn=(t(On,Jt=_t),On);function On(e,t){return Jt.call(this,Oe,e,t)||this}function Nn(e,t){return Qt.call(this,Ne,t,e)||this}function Fn(e){return en.call(this,Fe,e)||this}function Kn(e){var t=tn.call(this,Ke)||this;return t.nodeDescription=e,t}function Yn(e,t){var n=nn.call(this,Ye,t)||this;return n.argumentName=e,n}function Ln(e){var t=on.call(this,Le)||this;return t.argumentName=e,t}function Vn(e,t){var n=rn.call(this,Ve)||this;return n.argumentName=e,n.nodeDescription=t,n}function Xn(){return sn.call(this,Xe)||this}function Rn(){return ln.call(this,Re)||this}function Wn(e){var t=an.call(this,We)||this;return t.argumentName=e,t}function Hn(){return un.call(this,Ge)||this}function Gn(e){var t=cn.call(this,qe)||this;return t.argumentName=e,t}function qn(e,t){var n=hn.call(this,ze)||this;return n.filePaths=e,n.scannedFilePaths=t,n}function zn(){return fn.call(this,He)||this}function jn(e,t){var n=dn.call(this,Ze)||this;return n.properties=e?"scrollTargetY property":t?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}function $n(e,t){var n=mn.call(this,lt)||this;return e<=0?t<=0?(n.verb="are",n.dimensions="width and height"):(n.verb="is",n.dimensions="width"):(n.verb="is",n.dimensions="height"),n}function Zn(e){return pn.call(this,$e,e)||this}function Jn(){return vn.call(this,je)||this}function Qn(){return gn.call(this,Je)||this}function ei(){return En.call(this,ht)||this}function ti(){return yn.call(this,ct)||this}function ni(){return Sn.call(this,ft)||this}function ii(){return bn.call(this,dt)||this}function oi(){return _n.call(this,pt)||this}function ri(){return wn.call(this,St)||this}function si(e){var t=Pn.call(this,yt)||this;return t.errMsg=e,t}function li(){return Cn.call(this,vt)||this}function ai(){return An.call(this,gt)||this}function ui(){return xn.call(this,Et)||this}function ci(){return Tn.call(this,mt)||this}function hi(){return Un.call(this,bt)||this}function fi(){return Mn.call(this,Qe)||this}function di(){return Dn.call(this,et)||this}function mi(e,t){var n=In.call(this,tt)||this;return n.dialogType=e,n.pageUrl=t,n}function pi(e,t,n){var i=kn.call(this,nt)||this;return i.dialogType=e,i.errMsg=t,i.pageUrl=n,i}t(Nn,Qt=Bt),t(Fn,en=Ce),t(Kn,tn=Ce),t(Yn,nn=Bt),t(Ln,on=Ce),t(Vn,rn=Ce),t(Xn,sn=Ce),t(Rn,ln=Ce),t(Wn,an=Ce),t(Hn,un=Ce),t(Gn,cn=Ce),t(qn,hn=Ce),t(zn,fn=Ce),t(jn,dn=Ce),t($n,mn=Ce),t(Zn,pn=Ce),t(Jn,vn=Ce),t(Qn,gn=Ce),t(ei,En=Ce),t(ti,yn=Ce),t(ni,Sn=Ce),t(ii,bn=Ce),t(oi,_n=Ce),t(ri,wn=Ce),t(si,Pn=Ce),t(li,Cn=Ce),t(ai,An=Ce),t(ui,xn=Ce),t(ci,Tn=Ce),t(hi,Un=Ce),t(fi,Mn=Ce),t(di,Dn=Ce),t(mi,In=Ce),t(pi,kn=Ce);var vi,gi,Ei,yi,Si,bi=Pe(Wt),_i=(gi=Pe(vi=qt),function(e,t){if(gi(e,t),t<0)throw new vi(e,t)}),wi=(Ei=$t,function(e,t){var n=typeof t;if("boolean"!=n)throw new Ei(e,n)}),Pi=(yi=Bn,function(e,t){var n=typeof t;if("number"!=n)throw new yi(e,n);if(isNaN(t)||t<.01||1<t)throw new yi(e,t)}),Ci=(t(Ai,Si=_e),Ai.prototype._getAssignableProperties=function(){return[{name:"speed",type:Pi}]},Ai);function Ai(e,t){var n=Si.call(this)||this;return n.speed=null,n._assignFrom(e,t),n}var xi,Ti=(t(Ui,xi=Ci),Ui.prototype._getAssignableProperties=function(){return xi.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:bi},{name:"offsetY",type:bi}])},Ui);function Ui(e,t){var n=xi.call(this)||this;return n.offsetX=null,n.offsetY=null,n._assignFrom(e,t),n}var Mi,Di,Ii=(t(ki,Mi=Ti),ki.prototype._getAssignableProperties=function(){return Mi.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:wi},{name:"skipParentFrames",type:wi}])},ki);function ki(e,t){var n=Mi.call(this)||this;return n.scrollToCenter=!1,n.skipParentFrames=!1,n._assignFrom(e,t),n}function Bi(e,t){var n=Di.call(this)||this;return n.scrollTargetX=null,n.scrollTargetY=null,n.includeMargins=!1,n.includeBorders=!0,n.includePaddings=!0,n.crop={left:null,right:null,top:null,bottom:null},n._assignFrom(e,t),n}t(Bi,Di=Ci),Bi.prototype._getAssignableProperties=function(){return Di.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:bi},{name:"scrollTargetY",type:bi},{name:"crop.left",type:bi},{name:"crop.right",type:bi},{name:"crop.top",type:bi},{name:"crop.bottom",type:bi},{name:"includeMargins",type:wi},{name:"includeBorders",type:wi},{name:"includePaddings",type:wi}])};var Oi,Ni=(t(Fi,Oi=Ti),Fi.prototype._getAssignableProperties=function(){return Oi.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:wi},{name:"modifiers.alt",type:wi},{name:"modifiers.shift",type:wi},{name:"modifiers.meta",type:wi}])},Fi);function Fi(e,t){var n=Oi.call(this)||this;return n.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},n._assignFrom(e,t),n}var Ki,Yi=(t(Li,Ki=Ni),Li.prototype._getAssignableProperties=function(){return Ki.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:_i}])},Li);function Li(e,t){var n=Ki.call(this)||this;return n.caretPos=null,n._assignFrom(e,t),n}var Vi,Xi=(t(Ri,Vi=Ni),Ri.prototype._getAssignableProperties=function(){return Vi.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:wi},{name:"skipDefaultDragBehavior",type:wi}])},Ri);function Ri(e,t){var n=Vi.call(this)||this;return n.speed=null,n.minMovingTime=null,n.holdLeftButton=!1,n.skipScrolling=!1,n.skipDefaultDragBehavior=!1,n._assignFrom(e,t),n}var Wi,Hi,Gi,qi,zi,ji=(t($i,Wi=Yi),$i.prototype._getAssignableProperties=function(){return Wi.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:wi},{name:"paste",type:wi},{name:"confidential",type:wi}])},$i);function $i(e,t){var n=Wi.call(this)||this;return n.replace=!1,n.paste=!1,n.confidential=void 0,n._assignFrom(e,t),n}function Zi(e,t){var n=Hi.call(this,e,t)||this;return n.destinationOffsetX=null,n.destinationOffsetY=null,n._assignFrom(e,t),n}function Ji(e,t){var n=Gi.call(this)||this;return n.portraitOrientation=!1,n._assignFrom(e,t),n}function Qi(e,t){var n=qi.call(this)||this;return n.timeout=void 0,n.allowUnawaitedPromise=!1,n._assignFrom(e,t),n}function eo(e,t){var n=zi.call(this)||this;return n.confidential=void 0,n._assignFrom(e,t),n}t(Zi,Hi=Ni),Zi.prototype._getAssignableProperties=function(){return Hi.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:bi},{name:"destinationOffsetY",type:bi}])},t(Ji,Gi=_e),Ji.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:wi}]},t(Qi,qi=_e),Qi.prototype._getAssignableProperties=function(){return[{name:"timeout",type:_i},{name:"allowUnawaitedPromise",type:wi}]},t(eo,zi=Ci),eo.prototype._getAssignableProperties=function(){return zi.prototype._getAssignableProperties.call(this).concat([{name:"confidential",type:wi}])};var to=(no.create=function(e){return"left"in e?new no(e.left,e.top):"right"in e?new no(e.right,e.bottom):new no(e.x,e.y)},no.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},no.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},no.prototype.round=function(e){return void 0===e&&(e=Math.round),this.x=e(this.x),this.y=e(this.y),this},no.prototype.eql=function(e){return this.x===e.x&&this.y===e.y},no.prototype.mul=function(e){return this.x*=e,this.y*=e,this},no.prototype.distance=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},no);function no(e,t){this.x=e,this.y=t}var io=(oo.prototype._ensureActiveWindow=function(e){this._activeWindow!==e&&this._activeWindow!==e.parent&&this._activeWindow.parent!==e&&(this._activeWindow=e)},oo.prototype.isActive=function(e){return this._ensureActiveWindow(e),this._activeWindow===e},oo.prototype.setActiveWindow=function(e){this._activeWindow=e},oo.prototype.getActiveWindow=function(e){return this._ensureActiveWindow(e),this._activeWindow},oo.prototype.getPosition=function(){return new to(this._x,this._y)},oo.prototype.move=function(e){return this._x=e.x,this._y=e.y,this._ui.move(e)},oo.prototype.hide=function(){return this._ui.hide?this._ui.hide():c.PromiseCtor.resolve()},oo.prototype.show=function(){return this._ui.show?this._ui.show():c.PromiseCtor.resolve()},oo.prototype.leftButtonDown=function(){return this._ui.leftButtonDown()},oo.prototype.rightButtonDown=function(){return this._ui.rightButtonDown()},oo.prototype.buttonUp=function(){return this._ui.buttonUp()},oo);function oo(e,t){this._ui=t,this._x=-1,this._y=-1,this._activeWindow=e}var ro=ue(hu)?i.iframeCursorUI:i.cursorUI,so=new io(hu.top,ro);function lo(e,t,n){var i=function(e,t,n){if(t.y-e.y==0)return 0;var i=(t.x-e.x)/(t.y-e.y),o=e.y*(e.x-t.x)/(t.y-e.y)+e.x;return Math.round(i*n+o)}(e,t,n.top);return i&&i>=n.left&&i<=n.right?new to(i,n.top):null}function ao(e,t,n){var i=function(e,t,n){if(t.x===e.x)return 0;var i=(t.y-e.y)/(t.x-e.x),o=e.x*(e.y-t.y)/(t.x-e.x)+e.y;return Math.round(i*n+o)}(e,t,n.left);return i&&i>=n.top&&i<=n.bottom?new to(n.left,i):null}function uo(e,t,n){for(var i=[],o=0,r=[{left:n.left,top:n.top,right:n.left,bottom:n.bottom,isHorizontal:!1},{left:n.right,top:n.top,right:n.right,bottom:n.bottom,isHorizontal:!1},{left:n.left,top:n.top,right:n.right,bottom:n.top,isHorizontal:!0},{left:n.left,top:n.bottom,right:n.right,bottom:n.bottom,isHorizontal:!0}];o<r.length;o++){var s=r[o],l=(s.isHorizontal?lo:ao)(e,t,s);l&&i.push(l)}return i.length?1===i.length||i[0].distance(e)<i[1].distance(e)?i[0]:i[1]:null}var co=null,ho=function(){return co},fo=function(e){co=e};function mo(){return t=0,n=c.nativeMethods.setTimeout,new c.PromiseCtor(function(e){return n(e,t)});var t,n}var po=(vo.create=function(o,r,s,l){return h(this,void 0,void 0,function(){var t,n,i;return S(this,function(e){switch(e.label){case 0:return[4,vo.getTarget(o,r,new to(l.offsetX,l.offsetY))];case 1:return t=e.sent(),n=t.element,i=t.offset,[2,new vo(n,i,r,s,l)]}})})},vo.getTarget=function(i,o,r){return c.PromiseCtor.resolve(c.position.containsOffset(i,r.x,r.y)).then(function(e){return e?{element:i,offset:r}:u.all([(n=i,t=r,c.PromiseCtor.resolve(c.dom.isDocumentElement(n)).then(function(e){if(e)return new to(0,0);var t=c.browser.isFirefox?Math.ceil:Math.round;return c.PromiseCtor.resolve(c.position.getOffsetPosition(n,t)).then(function(e){return to.create(e)})}).then(function(e){return e.add(t)})),c.dom.getDocumentElement(o)]).then(function(e){var t=e[0];return{element:e[1],offset:t}});var n,t})},vo.prototype._getCursorSpeed=function(){return this.automationSettings.cursorSpeed},vo.prototype._getTargetClientPoint=function(){var o=this;return c.PromiseCtor.resolve(c.style.getElementScroll(this.element)).then(function(i){return c.dom.isHtmlElement(o.element)?to.create(o.offset).sub(to.create(i)):c.PromiseCtor.resolve(c.position.getClientPosition(o.element)).then(function(e){var t=c.dom.isBodyElement(o.element),n=to.create(e).add(o.offset);return t||n.sub(to.create(i)),n.round(Math.floor)})})},vo.prototype._getEventSequenceOptions=function(t){var n=this,i=c.event.BUTTONS_PARAMETER.noButton;return function(r){return h(this,void 0,void 0,function(){return S(this,function(e){return r?[2,c.PromiseCtor.resolve(c.position.getWindowPosition()).then(function(e){var t=e.x,n=e.y,i=t+r.x,o=n+r.y;return new to(i,o)})]:[2,null]})})}(t).then(function(e){return{eventOptions:{clientX:t.x,clientY:t.y,screenX:null==e?void 0:e.x,screenY:null==e?void 0:e.y,buttons:i,ctrl:n.modifiers.ctrl,alt:n.modifiers.alt,shift:n.modifiers.shift,meta:n.modifiers.meta},eventSequenceOptions:{moveEvent:n.moveEvent}}})},vo.prototype._runEventSequence=function(t,e){var n=e.eventOptions,i=e.eventSequenceOptions;return h(this,void 0,void 0,function(){return S(this,function(e){switch(e.label){case 0:return[4,c.createEventSequence(!1,this.firstMovingStepOccured,i)];case 1:return[2,e.sent().run(t,ho(),n,null,null)]}})})},vo.prototype._emulateEvents=function(t,e){var n=this;return this._getEventSequenceOptions(e).then(function(e){return n._runEventSequence(t,e)}).then(function(){n.firstMovingStepOccured=!0,fo(t)})},vo.prototype._movingStep=function(n){var i=this;return this.cursor.move(n).then(function(){return c.getElementExceptUI(i.cursor.getPosition())}).then(function(e){var t=i._getCorrectedTopElement(e);return t?i._emulateEvents(t,n):null}).then(mo)},vo.prototype._getCorrectedTopElement=function(e){return e},vo.prototype._move=function(t){var n=this,i=this.cursor.getPosition(),o=to.create(t).sub(i),r=c.nativeMethods.dateNow(),s=Math.max(Math.max(Math.abs(o.x),Math.abs(o.y))/this.cursorSpeed,this.minMovingTime),l=to.create(i),a=!0;return function(t,n){return h(this,void 0,void 0,function(){return S(this,function(e){switch(e.label){case 0:return t()?[4,n()]:[3,2];case 1:return e.sent(),[3,0];case 2:return[2]}})})}(function(){return!l.eql(t)},function(){var e;return n._needMoveCursorImmediately()?l=to.create(t):a?(a=!1,l.add({x:0<o.x?1:-1,y:0<o.y?1:-1})):(e=Math.min((c.nativeMethods.dateNow()-r)/s,1),l=to.create(o).mul(e).add(i).round(Math.floor)),n._movingStep(l)})},vo.prototype._needMoveCursorImmediately=function(){return this.touchMode},vo.prototype._scroll=function(){if(this.skipScrolling)return c.PromiseCtor.resolve(!1);var e=new Ii({offsetX:this.offset.x,offsetY:this.offset.y},!1);return c.scroll(this.element,e)},vo.prototype._moveToCurrentFrame=function(e){var t=this;if(this.cursor.isActive(this.window))return c.PromiseCtor.resolve();var n=this.cursor.getPosition(),i=n.x,o=n.y,r=this.cursor.getActiveWindow(this.window),s=null,l=null,a={cmd:"automation|move|request",startX:i,startY:o,endX:e.x,endY:e.y,modifiers:this.modifiers,speed:this.speed};return c.PromiseCtor.resolve().then(function(){if(r.parent===t.window)return c.PromiseCtor.resolve(c.dom.findIframeByWindow(r)).then(function(e){return s=e,c.PromiseCtor.resolve(c.position.getIframeClientCoordinates(e)).then(function(e){a.left=e.left,a.top=e.top,a.right=e.right,a.bottom=e.bottom})})}).then(function(){return c.getElementExceptUI(t.cursor.getPosition())}).then(function(e){return l=e===s,r.parent===t.window&&(a.iframeUnderCursor=l),c.sendRequestToFrame(a,"automation|move|response",r)}).then(function(e){if(t.cursor.setActiveWindow(t.window),l||c.dom.isIframeWindow(t.window))return t.cursor.move(e)})},vo.prototype.run=function(){var n=this;return this._scroll().then(function(){return u.all([n._getTargetClientPoint(),c.style.getWindowDimensions(n.window)])}).then(function(e){var t=e[0];if(e[1].contains(t))return n._moveToCurrentFrame(t).then(function(){return n._move(t)})})},vo);function vo(e,t,n,i,o){this.touchMode=c.featureDetection.isTouchDevice,this.moveEvent=this.touchMode?"touchmove":"mousemove",this.automationSettings=new Se(o.speed),this.cursorSpeed=this._getCursorSpeed(),this.element=e,this.window=n,this.offset=t,this.cursor=i,this.minMovingTime=o.minMovingTime||0,this.modifiers=o.modifiers||{},this.skipScrolling=o.skipScrolling,this.skipDefaultDragBehavior=o.skipDefaultDragBehavior,this.speed=o.speed,this.firstMovingStepOccured=!1}var go=m.eventSandbox.eventSimulator,Eo=m.eventSandbox.message,yo=y.positionUtils,So=y.domUtils,bo=y.styleUtils,_o="automation|move|response";Eo.on(Eo.SERVICE_MSG_RECEIVED_EVENT,function(e){var t,n,i,o,r,s,l,a,u,c,h,f,d;"automation|move|request"===e.message.cmd&&(e.source.parent===hu?(n=new to((t=e).message.endX,t.message.endY),i=t.source,o=So.findIframeByWindow(i),r=bo.getBordersWidth(o),s=bo.getElementPadding(o),l=yo.getIframeClientCoordinates(o),a=yo.getIframePointRelativeToParentFrame(n,i),u=so.getPosition(),c=yo.isInRectangle(u,l)?u:uo(u,a,l),h={x:c.x-l.left,y:c.y-l.top},f=new Xi({modifiers:t.message.modifiers,offsetX:h.x+r.left+s.left,offsetY:h.y+r.top+s.top,speed:t.message.speed,skipScrolling:!0},!1),d={cmd:_o,x:h.x,y:h.y},so.getActiveWindow(hu)!==i?po.create(o,hu,so,f).then(function(e){return e.run()}).then(function(){so.setActiveWindow(i),Eo.sendServiceMsg(d,i)}):Eo.sendServiceMsg(d,i)):(m.on(m.EVENTS.beforeUnload,function(){return Eo.sendServiceMsg({cmd:_o},e.source)}),function(e){var t=e.source,n={left:e.message.left,right:e.message.right,top:e.message.top,bottom:e.message.bottom};if(!e.message.iframeUnderCursor){var i=e.message,o=i.startX,r=i.startY,s=o-n.left,l=r-n.top,a=ho();return a&&(go.mouseout(a,{clientX:s,clientY:l,relatedTarget:null}),go.mouseleave(a,{clientX:s,clientY:l,relatedTarget:null})),Eo.sendServiceMsg({cmd:_o},t)}var u,c=so.getPosition(),h=uo(to.create(n).add(c),new to(e.message.endX,e.message.endY),n);h?(u=new Xi({modifiers:e.message.modifiers,offsetX:h.x-n.left,offsetY:h.y-n.top,speed:e.message.speed,skipScrolling:!0},!1),po.create(fu.documentElement,hu,so,u).then(function(e){return e.run()}).then(function(){var e={cmd:_o,x:h.x,y:h.y};so.setActiveWindow(t),Eo.sendServiceMsg(e,t)})):Eo.sendServiceMsg({cmd:_o,x:n.left,y:n.top},t)}(e)))});var wo,Po=m.utils.extend,Co=function(e){var t=e.element,n=void 0===t?null:t,i=e.clientPoint,o=void 0===i?null:i,r=e.screenPoint,s=void 0===r?null:r,l=e.isTarget,a=void 0!==l&&l,u=e.inMoving,c=void 0!==u&&u;this.element=n,this.clientPoint=o,this.screenPoint=s,this.isTarget=a,this.inMoving=c,this.devicePoint=re(o)},Ao=(t(xo,wo=g.serviceUtils.EventEmitter),xo.prototype._getElementForEvent=function(e){var t=g.positionUtils.containsOffset(this.element,this.options.offsetX,this.options.offsetY)?this.element:null;return Ee(e.point,t)},xo.prototype._moveToElement=function(){return h(this,void 0,void 0,function(){var t,n=this;return S(this,function(e){switch(e.label){case 0:return t=new Xi(Po({skipScrolling:!0},this.options),!1),[4,po.create(this.element,hu,so,t)];case 1:return[2,e.sent().run().then(function(){return g.delay(n.automationSettings.mouseActionStepDelay)})]}})})},xo.prototype._scrollToElement=function(){var s=this,e=new Ii(this.options),t=new g.ScrollAutomation(this.element,e),l=!1;return t.run().then(function(e){return l=e,g.delay(s.automationSettings.mouseActionStepDelay)}).then(function(){return Ee(so.getPosition())}).then(function(e){if(!e||!g.domUtils.contains(s.element,e)||!l)return null;var t=ho(),n=g.domUtils.getCommonAncestor(e,t),i=g.positionUtils.getClientPosition(e),o=re({x:i.x,y:i.y}),r={clientX:i.x,clientY:i.y,screenX:o.x,screenY:o.y,ctrl:!1,alt:!1,shift:!1,meta:!1,buttons:g.eventUtils.BUTTONS_PARAMETER.leftButton};return p.leaveElement(e,t,n,r),p.enterElement(e,t,n,r),fo(e),l})},xo.prototype._getElementOffset=function(){var e=ae(this.element),t=this.options,n=t.offsetX,i=t.offsetY;return{offsetX:n=n||0===n?n:e.offsetX,offsetY:i=i||0===i?i:e.offsetY}},xo.prototype._wrapAction=function(e){var a=this,t=this._getElementOffset(),i=t.offsetX,u=t.offsetY,c=oe(this.element,i,u),h=g.positionUtils.getClientPosition(this.element);return e().then(function(){var e,t,n,o=oe(a.element,i,u),r=g.positionUtils.getClientPosition(a.element),s=(e=a.element,t=o,n=g.styleUtils.getElementScroll(e),!/html/i.test(e.tagName)&&g.styleUtils.hasScroll(e)&&(t.x-=n.left,t.y-=n.top),g.positionUtils.offsetToClientCoords(t)),l=g.positionUtils.containsOffset(a.element,i,u)?a.element:null;return Ee(s,l).then(function(e){if(!e)return new Co({});var t=(t=!l||e===l||e===a.element)||-1<g.arrayUtils.indexOf(g.domUtils.getParents(e),a.element),n=c.x!==o.x||c.y!==o.y,i=h.x!==r.x||h.y!==r.y;return new Co({element:e,clientPoint:s,screenPoint:o,isTarget:t,inMoving:n&&i})})})},xo._checkElementState=function(e,t){if(!e.element)throw new Error(ye.elementIsInvisibleError);if(t&&(!e.isTarget||e.inMoving))throw new Error(ye.foundElementIsNotTarget);return e},xo.prototype._ensureElement=function(t,n,i){var o=this;return this._wrapAction(function(){return o._scrollToElement()}).then(function(e){return xo._checkElementState(e,t)}).then(function(e){return i?e:o._wrapAction(function(){return o._moveToElement()})}).then(function(e){return n||xo._checkElementState(e,t),e}).then(function(e){return o.emit(o.TARGET_ELEMENT_FOUND_EVENT,{element:e.element}),{element:e.element,clientPoint:e.clientPoint,screenPoint:e.screenPoint,devicePoint:e.devicePoint}})},xo);function xo(e,t){var n=wo.call(this)||this;return n.TARGET_ELEMENT_FOUND_EVENT="automation|target-element-found-event",n.element=e,n.options=t,n.automationSettings=new Se(t.speed),n}var To,Uo=m.Promise,Mo=(t(Do,To=Ao),Do.prototype.run=function(e){var t=this,n=Uo.resolve();return this.element!==fu.scrollingElement&&this.element!==fu.documentElement&&(n=this._ensureElement(e,!0,!0)),n.then(function(){t.element.scrollLeft=t.scrollLeft,t.element.scrollTop=t.scrollTop})},Do);function Do(e,t,n){var i,o,r,s,l,a=t.x,u=t.y,c=t.position,h=t.byX,f=t.byY,d=To.call(this,e,n)||this;return c&&(o=e,r=c,s=Math.floor(o.scrollWidth/2-o.clientWidth/2),l=Math.floor(o.scrollHeight/2-o.clientHeight/2),a=(i={top:[s,0],right:[o.scrollWidth,l],bottom:[s,o.scrollHeight],left:[0,l],topRight:[o.scrollWidth,0],topLeft:[0,0],bottomRight:[o.scrollWidth,o.scrollHeight],bottomLeft:[0,o.scrollHeight],center:[s,l]}[r])[0],u=i[1]),d.scrollLeft="number"==typeof a?a:e.scrollLeft,d.scrollTop="number"==typeof u?u:e.scrollTop,h&&(d.scrollLeft+=h),f&&(d.scrollTop+=f),d}var Io,ko=(t(Bo,Io=Ao),Bo.prototype.run=function(e){return this._ensureElement(e,!0,!0)},Bo);function Bo(e,t){return Io.call(this,e,t)||this}var Oo=m.Promise,No=m.eventSandbox.message;function Fo(e,i,t){return new Oo(function(n){No.on(No.SERVICE_MSG_RECEIVED_EVENT,function e(t){t.message.cmd===i&&(No.off(No.SERVICE_MSG_RECEIVED_EVENT,e),n(t.message))}),No.sendServiceMsg(e,t)})}var Ko=m.Promise,Yo=m.nativeMethods,Lo=m.utils.browser,Vo=m.eventSandbox.focusBlur,Xo=y.contentEditable,Ro=y.textSelection,Wo=y.domUtils,Ho=y.styleUtils,Go=m.eventSandbox.message,qo="automation|iframe|request",zo="automation|iframe|response";function jo(v,g,E){var e=this;return new Ko(function(p){return h(e,void 0,void 0,function(){var s,n,i,o,r,l,a,u,c,h,f,d,m;return S(this,function(e){switch(e.label){case 0:return ue(hu)?[4,Fo({cmd:qo},zo,hu.parent)]:[3,2];case 1:e.sent(),e.label=2;case 2:if(s=Wo.getActiveElement(),n=Wo.isTextEditableElement(v),i=Wo.closest(v,"label[for]"),o=Wo.isElementFocusable(v),r=!o&&i,l=Wo.isContentEditableElement(v),a=l?Xo.findContentEditableParent(v):v,g&&Lo.isWebKit&&n&&Ro.select(v,0,0),r)return g&&(t=i,Wo.isElementFocusable(t)?Vo.focus(t,y.noop,!1,!0):Zo(t)),p(),[2];if(u=!g,c=!1,!o&&!l){if(h=Wo.findDocument(a),f=Yo.documentActiveElementGetter.call(h),d=Wo.isBodyElement(f),m=Wo.isBodyElement(a)?a:Wo.getFocusableParent(a),f&&!d&&Wo.containsElement(f,a)||d&&Wo.isBodyElement(m))return p(),[2];a=m||h.body,c=!0}return Vo.focus(a,function(){var e,t,n,i,o,r;!g||l||v===Wo.getActiveElement()?(e=v,t=E,o=Wo.isTextEditableElement(e),r=Wo.isContentEditableElement(e),o||r?r&&isNaN(parseInt(t,10))?Ro.setCursorToLastVisiblePosition(e):(n=isNaN(parseInt(t,10))?Wo.getElementValue(e).length:t,Ro.select(e,n,n)):(i=Xo.findContentEditableParent(e))&&Ro.setCursorToLastVisiblePosition(Xo.findContentEditableParent(i)),g||Wo.getActiveElement()===s?p():Vo.focus(s,p,!0,!0)):p()},u,!0,!1,c),[2]}var t})})})}function $o(e){var t=Wo.closest(e,"label[for]"),n=t&&(t.control||fu.getElementById(t.htmlFor));return n&&Ho.isElementVisible(n)?n:null}function Zo(e){var t=$o(e);t&&Wo.getActiveElement()!==t&&Vo.focus(t,y.noop,!1,!0)}Go.on(Go.SERVICE_MSG_RECEIVED_EVENT,function(e){var t;e.message.cmd===qo&&(t=Wo.findIframeByWindow(e.source),Vo.focus(t,function(){Go.sendServiceMsg({cmd:zo},e.source)},!1))});var Jo=m.Promise,Qo=m.nativeMethods;function er(){return new Jo(function(e){return Qo.setTimeout.call(hu,e,0)})}var tr=m.utils.browser,nr=m.eventSandbox.eventSimulator,ir=m.eventSandbox.listeners,or=m.nativeMethods,rr=y.domUtils,sr=y.styleUtils,lr=i.selectElement,ar=(ur.prototype.run=function(){this.eventState.clickElement&&nr.click(this.eventState.clickElement,this.eventArgs.options),rr.isElementFocusable(this.eventArgs.element)||Zo(this.eventArgs.element)},ur);function ur(e,t){this.eventState=e,this.eventArgs=t}var cr,hr=(t(fr,cr=ar),fr.prototype.run=function(){function e(e){n=or.eventTargetGetter.call(e)===t.input}var t=this,n=!1;ir.addInternalEventBeforeListener(hu,["focus"],e),cr.prototype.run.call(this),ir.removeInternalEventBeforeListener(hu,["focus"],e),rr.isElementFocusable(this.label)&&!n&&this._ensureBoundElementFocusRaised()},fr.prototype._ensureBoundElementFocusRaised=function(){nr.focus(this.input)},fr);function fr(e,t){var n=cr.call(this,e,t)||this;return n.label=n.eventArgs.element,n.input=$o(n.eventArgs.element),n}var dr,mr=(t(pr,dr=ar),pr.prototype.run=function(){dr.prototype.run.call(this),this._toggleSelectOptionList()},pr.prototype._toggleSelectOptionList=function(){var e=this.eventArgs.element;1===sr.getSelectElementSize(e)&&!1!==this.eventState.simulateDefaultBehavior&&(lr.isOptionListExpanded(e)?lr.collapseOptionList():lr.expandOptionList(e))},pr);function pr(e,t){return dr.call(this,e,t)||this}var vr,gr=(t(Er,vr=ar),Er.prototype.run=function(){return this.eventArgs.element},Er);function Er(e,t){return vr.call(this,e,t)||this}var yr,Sr=(t(br,yr=hr),br.prototype.run=function(){function e(){t=!0}var t=!1;ir.addInternalEventBeforeListener(hu,["change"],e),yr.prototype.run.call(this),ir.removeInternalEventBeforeListener(hu,["change"],e),tr.isChrome&&!t&&this._ensureCheckboxStateChanged()},br.prototype._ensureCheckboxStateChanged=function(){this.checkbox.checked=!this.checkbox.checked,nr.change(this.checkbox)},br);function br(e,t){var n=yr.call(this,e,t)||this;return n.checkbox=n.input,n}var _r,wr=m.Promise,Pr=m.utils.extend,Cr=m.utils.browser,Ar=m.utils.featureDetection,xr=m.eventSandbox.eventSimulator,Tr=m.eventSandbox.listeners,Ur=y.domUtils,Mr=y.eventUtils,Dr=y.arrayUtils,Ir=y.delay,kr=(t(Br,_r=Ao),Br.prototype._bindMousedownHandler=function(){var t=this,n=function(e){t.eventState.mousedownPrevented=e.defaultPrevented,Mr.preventDefault(e),Mr.unbind(t.element,"mousedown",n)};Mr.bind(this.element,"mousedown",n)},Br.prototype._bindBlurHandler=function(e){var t=this,n=function(){t.eventState.blurRaised=!0,Mr.unbind(e,"blur",n,!0)};Mr.bind(e,"blur",n,!0)},Br.prototype._isTouchEventWasCancelled=function(){return this.eventState.touchStartCancelled||this.eventState.touchEndCancelled},Br.prototype._raiseTouchEvents=function(e){Ar.isTouchDevice&&(this.eventState.touchStartCancelled=!xr.touchstart(e.element,e.options),this.eventState.touchEndCancelled=!xr.touchend(e.element,e.options))},Br.prototype._mousedown=function(n){var i=this;return this.targetElementParentNodes=Ur.getParents(n.element),this.mouseDownElement=n.element,so.leftButtonDown().then(function(){i._raiseTouchEvents(n);var e=Ur.getActiveElement();i.activeElementBeforeMouseDown=e;var t=(Cr.isWebKit||Cr.isIE)&&Ur.isSelectElement(i.mouseDownElement);return t&&i._bindMousedownHandler(),i._bindBlurHandler(e),i._isTouchEventWasCancelled()||(i.eventState.simulateDefaultBehavior=xr.mousedown(n.element,n.options)),!1===i.eventState.simulateDefaultBehavior&&(i.eventState.simulateDefaultBehavior=t&&!i.eventState.mousedownPrevented),i._ensureActiveElementBlur(e)}).then(function(){return i._focus(n)})},Br.prototype._ensureActiveElementBlur=function(t){var n=this;return new wr(function(e){Ur.getActiveElement()===t||n.eventState.blurRaised?e():Cr.isIE&&Cr.version<12?er().then(function(){n.eventState.blurRaised||xr.blur(t),e()}):(xr.blur(t),e())})},Br.prototype._focus=function(e){return!1===this.eventState.simulateDefaultBehavior?wr.resolve():jo(Ur.isContentEditableElement(this.element)?this.element:e.element,!Cr.isIE||this.activeElementBeforeMouseDown===Ur.getActiveElement(),this.caretPos)},Br._getElementForClick=function(e,t,n){var i=Ur.getParents(t),o=Ur.isTheSameNode(t,e);return Cr.isFirefox?o?e:null:o?Dr.equals(n,i)?e:null:e.contains(t)&&!Ur.isEditableFormElement(t)?e:t.contains(e)?t:Dr.getCommonElement(i,n)},Br.prototype._mouseup=function(i){var o=this;return so.buttonUp().then(function(){return o._getElementForEvent(i)}).then(function(e){i.element=e,o.eventState.clickElement=Br._getElementForClick(o.mouseDownElement,e,o.targetElementParentNodes);var t={},n=function(e){t=e.timeStamp,Tr.removeInternalEventBeforeListener(hu,["mouseup"],n)};return Cr.isIE||Tr.addInternalEventBeforeListener(hu,["mouseup"],n),o._isTouchEventWasCancelled()||xr.mouseup(e,i.options),{timeStamp:t}})},Br.prototype._click=function(e){var t,n,i,o,r,s,l,a=(t=this.eventState,i=$o((n=e).element),o=rr.isSelectElement(n.element),r=rr.isOptionElement(n.element),s=rr.isLabelElement(n.element)&&i,l=i&&rr.isCheckboxElement(i),new(o?mr:r?gr:l?Sr:s?hr:ar)(t,n));return this._isTouchEventWasCancelled()||a.run(),e},Br.prototype.run=function(e){var r=this,s=null;return this._ensureElement(e).then(function(e){var t=e.element,n=e.clientPoint,i=e.screenPoint,o=e.devicePoint;return s={point:n,screenPoint:i,element:t,options:Pr({clientX:n.x,clientY:n.y,screenX:o.x,screenY:o.y},r.modifiers)},wr.all([Ir(r.automationSettings.mouseActionStepDelay),r._mousedown(s)])}).then(function(){return r._mouseup(s)}).then(function(e){var t=e.timeStamp;return s.options.timeStamp=t,r._click(s)})},Br);function Br(e,t){var n=_r.call(this,e,t)||this;return n.modifiers=t.modifiers,n.caretPos=t.caretPos,n.targetElementParentNodes=[],n.activeElementBeforeMouseDown=null,n.mouseDownElement=null,n.eventState={mousedownPrevented:!1,blurRaised:!1,simulateDefaultBehavior:!0,clickElement:null,touchStartCancelled:!1,touchEndCancelled:!1},n}var Or=m.Promise,Nr=m.utils.browser,Fr=m.utils.featureDetection,Kr=m.eventSandbox.eventSimulator,Yr=m.eventSandbox.focusBlur,Lr=m.nativeMethods,Vr=y.domUtils,Xr=y.styleUtils,Rr=y.delay,Wr=i.selectElement,Hr=Fr.isTouchDevice?0:160,Gr=(qr.prototype._calculateEventArguments=function(){var e=this.optionListExpanded?Wr.getEmulatedChildElement(this.element):this.element,t=1<Xr.getSelectElementSize(this.parentSelect);return{options:this.modifiers,element:Nr.isIE&&t?this.parentSelect:e}},qr.prototype._getMoveArguments=function(){var e,t,n=null,i=null,o=null;return o=this.optionListExpanded?(i=(e=le(n=Wr.getEmulatedChildElement(this.element))).offsetX,e.offsetY):(n=fu.documentElement,i=(t=Wr.getSelectChildCenter(this.element)).x,t.y),{element:n,offsetX:i,offsetY:o,speed:this.speed}},qr.prototype._move=function(e){var t=this,n=e.element,i=e.offsetX,o=e.offsetY,r=e.speed,s=new Xi({offsetX:i,offsetY:o,speed:r,modifiers:this.modifiers},!1);return po.create(n,hu,so,s).then(function(e){return e.run()}).then(function(){return Rr(t.automationSettings.mouseActionStepDelay)})},qr.prototype._mousedown=function(){var e=this;return Nr.isFirefox?(Kr.mousedown(this.eventsArgs.element,this.eventsArgs.options),this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex),this._focus()):Nr.isIE?(Kr.mousedown(this.eventsArgs.element,this.eventsArgs.options),this._focus()):this._focus().then(function(){return Rr(Hr)}).then(function(){Kr.mousedown(e.eventsArgs.element,e.eventsArgs.options),e.clickCausesChange&&(e.parentSelect.selectedIndex=e.childIndex)})},qr.prototype._focus=function(){var t=this;return new Or(function(e){Yr.focus(t.parentSelect,e,!1,!0)})},qr.prototype._mouseup=function(){var e=Nr.isIE?this.parentSelect:this.eventsArgs.element;Kr.mouseup(e,this.eventsArgs.options),Nr.isIE&&this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex);var t=Nr.isFirefox||Nr.isSafari||Nr.isChrome&&53<=Nr.version,n=t||Nr.isIE;return t&&this.clickCausesChange&&Kr.input(this.parentSelect),n&&this.clickCausesChange&&Kr.change(this.parentSelect),Or.resolve()},qr.prototype._click=function(){Kr.click(this.eventsArgs.element,this.eventsArgs.options)},qr.prototype.run=function(){var e=this;if(!this.parentSelect)return Kr.click(this.eventsArgs.element,this.eventsArgs.options),Or.resolve();this.optionListExpanded||Wr.scrollOptionListByChild(this.element);var t=this._getMoveArguments();return this.eventsArgs=this._calculateEventArguments(),Xr.getSelectElementSize(this.parentSelect)<=1?this._move(t).then(function(){return e._click()}):this._move(t).then(function(){return e._mousedown()}).then(function(){return e._mouseup()}).then(function(){return e._click()})},qr);function qr(e,t){var n,i,o,r,s;this.element=e,this.modifiers=t.modifiers,this.caretPos=t.caretPos,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.speed=t.speed,this.automationSettings=new Se(t.speed),this.parentSelect=Vr.getSelectParent(this.element),this.optionListExpanded=!!this.parentSelect&&Wr.isOptionListExpanded(this.parentSelect),this.childIndex=null,this.clickCausesChange=!1,this.parentSelect&&(n=Vr.isOptionElement(this.element),i=this.parentSelect.selectedIndex,this.childIndex=Vr.getElementIndexInParent(this.parentSelect,this.element),o=Lr.nodeParentNodeGetter.call(this.element),r=Vr.isOptionGroupElement(o)?o:null,s=this.element.disabled||r&&r.disabled,this.clickCausesChange=n&&!s&&this.childIndex!==i),this.eventsArgs={options:this.modifiers,element:this.element}}var zr,jr=m.utils.featureDetection,$r=m.utils.browser,Zr=m.eventSandbox.eventSimulator,Jr=y.eventUtils,Qr=y.delay,es=jr.isTouchDevice?0:160,ts=(t(ns,zr=Ao),ns.prototype._firstClick=function(e){var t=this,n=new Yi(this.options);n.speed=1;var i=new kr(this.element,n);return i.on(i.TARGET_ELEMENT_FOUND_EVENT,function(e){return t.emit(t.TARGET_ELEMENT_FOUND_EVENT,e)}),i.run(e).then(function(e){return Qr(es).then(function(){return e})})},ns.prototype._secondClick=function(e){var t=this;$r.isIE&&Jr.bind(fu,"focus",Jr.preventDefault,!0);var n=new Yi({offsetX:e.screenPoint.x,offsetY:e.screenPoint.y,caretPos:this.caretPos,modifiers:this.modifiers,speed:1}),i=new kr(fu.documentElement,n);return i.run().then(function(e){return t.eventState.dblClickElement=i.eventState.clickElement,$r.isIE&&Jr.unbind(fu,"focus",Jr.preventDefault,!0),e})},ns.prototype._dblClick=function(e){this.eventState.dblClickElement&&Zr.dblclick(this.eventState.dblClickElement,e.options)},ns.prototype.run=function(e){var t=this;return this._firstClick(e).then(function(e){return t._secondClick(e)}).then(function(e){return t._dblClick(e)})},ns);function ns(e,t){var n=zr.call(this,e,t)||this;return n.modifiers=t.modifiers,n.caretPos=t.caretPos,n.speed=t.speed,n.automationSettings=new Se(n.speed),n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.eventArgs=null,n.eventState={dblClickElement:null},n}var is,os=function(){this.enabled=!1,this.dropAllowed=!1,this.element=null,this.dataTransfer=null,this.dataStore=null},rs=m.nativeMethods,ss=m.utils.featureDetection,ls=m.utils.html,as=m.utils.url,us=m.eventSandbox.DataTransfer,cs=m.eventSandbox.DragDataStore,hs=y.eventUtils,fs=y.domUtils,ds=(t(ms,is=po),ms.create=function(o,r,s,l){return h(this,void 0,void 0,function(){var t,n,i;return S(this,function(e){switch(e.label){case 0:return[4,po.getTarget(o,r,new to(l.offsetX,l.offsetY))];case 1:return t=e.sent(),n=t.element,i=t.offset,[2,new ms(n,i,r,s,l)]}})})},ms.prototype._getCursorSpeed=function(){return this.automationSettings.draggingSpeed},ms.prototype._getEventSequenceOptions=function(e){var i=this;return is.prototype._getEventSequenceOptions.call(this,e).then(function(e){var t=e.eventOptions,n=e.eventSequenceOptions;return t.dataTransfer=i.dragAndDropState.dataTransfer,t.buttons=hs.BUTTONS_PARAMETER.leftButton,n.holdLeftButton=!0,{eventOptions:t,eventSequenceOptions:n}})},ms.prototype._getCorrectedTopElement=function(e){return this.touchMode?this.dragElement:e},ms.prototype._runEventSequence=function(e,t){var n=t.eventOptions,i=t.eventSequenceOptions,o=k(this.dragAndDropState.enabled,this.firstMovingStepOccured,i).run(e,ho(),n,this.dragElement,this.dragAndDropState.dataStore),r=o.dragAndDropMode,s=o.dropAllowed;this.dragAndDropState.enabled=r,this.dragAndDropState.dropAllowed=s},ms.prototype._needMoveCursorImmediately=function(){return!1},ms.prototype.run=function(){var l=this;return Ee(this.cursor.getPosition()).then(function(e){l.dragElement=e;var t,n,i,o,r,s=function(e){for(var t=e;t;){if(t.draggable)return t;t=rs.nodeParentNodeGetter.call(t)}return null}(l.dragElement);return s&&ss.hasDataTransfer&&!l.skipDefaultDragBehavior&&(l.dragAndDropState.enabled=!0,l.dragElement=s,l.dragAndDropState.element=l.dragElement,l.dragAndDropState.dataStore=new cs,l.dragAndDropState.dataTransfer=new us(l.dragAndDropState.dataStore),((t=fs.isAnchorElement(l.dragElement))||fs.isImgElement(l.dragElement))&&(n=t?"href":"src",o=(i=as.parseProxyUrl(l.dragElement[n]))?i.destUrl:l.dragElement[n],r=ls.cleanUpHtml(rs.elementOuterHTMLGetter.call(l.dragElement)),l.dragAndDropState.dataTransfer.setData("text/plain",o),l.dragAndDropState.dataTransfer.setData("text/uri-list",o),l.dragAndDropState.dataTransfer.setData("text/html",r))),is.prototype.run.call(l).then(function(){return l.dragAndDropState})})},ms);function ms(e,t,n,i,o){var r=is.call(this,e,t,n,i,o)||this;return r.dragElement=null,r.dragAndDropState=new os,r}var ps,vs=m.Promise,gs=m.utils.extend,Es=m.utils.featureDetection,ys=m.eventSandbox.eventSimulator,Ss=m.eventSandbox.focusBlur,bs=(t(_s,ps=Ao),_s.prototype._getEndPoint=function(){throw new Error("Not implemented")},_s.prototype._mousedown=function(e){var t=this;return so.leftButtonDown().then(function(){return t.simulateDefaultBehavior=ys[t.downEvent](e.element,e.options),t._focus(e)})},_s.prototype._focus=function(n){var i=this;return new vs(function(e){var t=g.domUtils.isContentEditableElement(i.element)?g.contentEditable.findContentEditableParent(i.element):n.element;Ss.focus(t,e,!1,!0)})},_s.prototype._getDestination=function(){throw new Error("Not implemented")},_s.prototype._drag=function(){var t=this,e=this._getDestination(),n=e.element,i=e.offsets,o=e.endPoint;this.endPoint=o;var r=new Xi({offsetX:i.offsetX,offsetY:i.offsetY,modifiers:this.modifiers,speed:this.speed,minMovingTime:25,skipDefaultDragBehavior:!1===this.simulateDefaultBehavior},!1);return ds.create(n,hu,so,r).then(function(e){return e.run()}).then(function(e){return t.dragAndDropState=e,g.delay(t.automationSettings.mouseActionStepDelay)})},_s.prototype._mouseup=function(){var o=this;return so.buttonUp().then(function(){var t=g.positionUtils.offsetToClientCoords(o.endPoint),n=null,i=gs({clientX:t.x,clientY:t.y},o.modifiers);return Ee(t).then(function(e){return(n=e)?(o.dragAndDropState.enabled?(i.dataTransfer=o.dragAndDropState.dataTransfer,o.dragAndDropState.dropAllowed&&ys.drop(n,i),ys.dragend(o.dragAndDropState.element,i),o.dragAndDropState.dataStore.setProtectedMode()):ys[o.upEvent](n,i),Ee(t)):n}).then(function(e){n&&e===n&&!o.dragAndDropState.enabled&&ys.click(n,i)})})},_s.prototype.run=function(e){var i,o=this;return this._ensureElement(e).then(function(e){var t=e.element,n=e.clientPoint;return i={point:n,element:t,options:gs({clientX:n.x,clientY:n.y},o.modifiers)},vs.all([g.delay(o.automationSettings.mouseActionStepDelay),o._mousedown(i)])}).then(function(){return o._drag()}).then(function(){return o._mouseup()})},_s);function _s(e,t){var n=ps.call(this,e,t)||this;return n.modifiers=t.modifiers,n.speed=t.speed,n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.endPoint=null,n.simulateDefaultBehavior=!0,n.downEvent=Es.isTouchDevice?"touchstart":"mousedown",n.upEvent=Es.isTouchDevice?"touchend":"mouseup",n.dragAndDropState=null,n}var ws,Ps=y.styleUtils,Cs=(t(As,ws=bs),As.prototype._getDestination=function(){var e=oe(this.element,this.offsetX,this.offsetY),t=Ps.getWidth(fu),n=Ps.getHeight(fu),i={x:e.x+this.dragOffsetX,y:e.y+this.dragOffsetY},i={x:Math.min(Math.max(0,i.x),t),y:Math.min(Math.max(0,i.y),n)};return{element:fu.documentElement,offsets:{offsetX:i.x,offsetY:i.y},endPoint:i}},As);function As(e,t,n,i){var o=ws.call(this,e,i)||this;return o.dragOffsetX=t,o.dragOffsetY=n,o}var xs,Ts=y.positionUtils,Us=(t(Ms,xs=bs),Ms.prototype._getDestination=function(){var e=this.destinationElement,t=Ts.getElementRectangle(e),n=ae(e,this.destinationOffsetX,this.destinationOffsetY);return{element:e,offsets:n,endPoint:{x:t.left+n.offsetX,y:t.top+n.offsetY}}},Ms);function Ms(e,t,n){var i=xs.call(this,e,n)||this;return i.destinationElement=t,i.destinationOffsetX=n.destinationOffsetX,i.destinationOffsetY=n.destinationOffsetY,i}var Ds,Is=(t(ks,Ds=Ao),ks.prototype.run=function(e){return this._ensureElement(e,!0)},ks);function ks(e,t){return Ds.call(this,e,t)||this}var Bs=m.utils.browser,Os=m.sandbox.event,Ns=m.eventSandbox.eventSimulator,Fs=m.eventSandbox.listeners,Ks=m.nativeMethods,Ys=y.domUtils,Ls=y.contentEditable,Vs=y.textSelection,Xs=/ /g;function Rs(e){var t=Vs.getSelectionByElement(e),n=Vs.hasInverseSelectionContentEditable(e);return Vs.hasElementContainsSelection(e)?Ls.getSelection(e,t,n):{startPos:Ls.calculateNodeAndOffsetByPosition(e,0),endPos:Ls.calculateNodeAndOffsetByPosition(e,0)}}function Ws(e){var t=e.startPos.node,n=e.startPos.offset,i=e.endPos.offset,o=Ls.getFirstNonWhitespaceSymbolIndex(t.nodeValue),r=Ls.getLastNonWhitespaceSymbolIndex(t.nodeValue);return n<o&&0!==n?(e.startPos.offset=o,e.endPos.offset=i+o-n):r<i&&i!==t.nodeValue.length&&(e.startPos.offset=t.nodeValue.length,e.endPos.offset=i+t.nodeValue.length-n),e}function Hs(e,t,n){return!n||Ns.beforeInput(e,t)}function Gs(e,t){var n;function i(e){e.preventDefault(),n=!0}function o(e){"textInput"===e.type&&(n=!1)}Bs.isSafari&&(Fs.addInternalEventBeforeListener(hu,["textInput"],i),Os.on(Os.EVENT_PREVENTED_EVENT,o));var r=Bs.isFirefox||Ns.textInput(e,t)||n;return Bs.isSafari&&(Fs.removeInternalEventBeforeListener(hu,["textInput"],i),Os.off(Os.EVENT_PREVENTED_EVENT,o)),r||Bs.isIE11}function qs(e,t){var n,i,o,r,s,l,a,u,c,h,f,d=Rs(e),m=d.startPos.node,p=d.endPos.node,v=!0,g=!0,E=t;function y(){g=!1}function S(e,t,n){n()}t=t.replace(Xs,String.fromCharCode(160)),m&&p&&Ys.isContentEditableElement(m)&&Ys.isContentEditableElement(p)&&(Ys.isTheSameNode(m,p)||(Vs.deleteSelectionContents(e),n=e,o=(i=d).startPos.node,r=Ks.nodeParentNodeGetter.call(o)&&o.parentElement,!(Bs.isChrome&&Bs.version<58||Bs.isSafari)&&r&&Ys.isElementContainsNode(n,o)||(i=Rs(n),Vs.hasInverseSelectionContentEditable(n)&&(i={startPos:i.endPos,endPos:i.startPos})),i.endPos.offset=i.startPos.offset,m=(d=i).startPos.node),m&&Ys.isContentEditableElement(m)&&Ys.isRenderedNode(m)&&Hs(e,t,Bs.isChrome||Bs.isFirefox)&&(v=Gs(e,E),g=v&&!Bs.isIE11,Fs.addInternalEventBeforeListener(hu,["input"],y),Fs.addInternalEventBeforeListener(hu,["textinput"],S),(v=v&&Hs(e,t,Bs.isSafari))&&(Ys.isElementNode(m)?(s=m,l=t,c=fu.createTextNode(l),h={node:c,offset:l.length},f=Ks.nodeParentNodeGetter.call(s),"br"===Ys.getTagName(s)?f.insertBefore(c,s):0<a?(u=Ks.nodeChildNodesGetter.call(s),s.insertBefore(c,u[a])):s.appendChild(c),Vs.selectByNodesAndOffsets(h,h)):function(e,t,n){var i=t.startPos.node;Ys.isElementContainsNode(e,i)||(i=(t=Ws(Rs(e))).startPos.node);var o=t.startPos.offset,r=t.endPos.offset,s=i.nodeValue,l={node:i,offset:o+n.length};i.nodeValue=s.substring(0,o)+n+s.substring(r,s.length),Vs.selectByNodesAndOffsets(l,l)}(e,Ws(d),t)),er().then(function(){g&&Ns.input(e,t),Fs.removeInternalEventBeforeListener(hu,["input"],y),Fs.removeInternalEventBeforeListener(hu,["textinput"],S)})))}function zs(e,t,n){var i,o,r,s,l,a,u,c,h,f,d,m,p;Ys.isContentEditableElement(e)&&qs(e,t),Ys.isElementReadOnly(e)||(Ys.isTextEditableElement(e)?(l=e,a=t,h=Ys.getElementValue(l),f=a.length,d=Vs.getSelectionStart(l),m=Vs.getSelectionEnd(l),p=Ys.isInputElement(l)&&"number"===l.type,Hs(l,a,Bs.isChrome||Bs.isFirefox)&&Gs(l,a)&&Hs(l,a,Bs.isSafari)&&((u=!Bs.isIE&&p?null:parseInt(l.maxLength,10))<0&&(u=Bs.isIE&&Bs.version<17?0:null),c=h.substring(0,d)+a+h.substring(m,h.length),(null===u||isNaN(u)||c.length<=u)&&(p&&Bs.isIOS&&"."===h[h.length-1]&&(d+=1),Ys.setElementValue(l,c),Vs.select(l,d+f,d+f)),Ns.input(l,a))):Ys.isInputElement(e)&&(i=e,o=t,null!==(r=n)?(s=Ys.getElementValue(i),Ys.setElementValue(i,s.substr(0,r)+o+s.substr(r+o.length))):Ys.setElementValue(i,o),Ns.change(i),Ns.input(i,o)))}function js(e){return 1===e.length&&("a"<=e&&e<="z"||"A"<=e&&e<="Z")}var $s=m.nativeMethods,Zs=m.utils.browser,Js=m.eventSandbox.focusBlur,Qs=m.Promise,el=g.domUtils.isRadioButtonElement,tl=g.domUtils.getActiveElement,nl=g.domUtils.getTabIndexAttributeIntValue;function il(e){return e===e.toLowerCase()?e.toUpperCase():e.toLowerCase()}function ol(e){var t=tl(e||fu),n=null;if(t&&g.domUtils.isIframeElement(t)&&$s.contentDocumentGetter.call(t))try{n=ol($s.contentDocumentGetter.call(t))}catch(e){}return n||t}function rl(e,t,n){if(!el(t))return e;if(!n&&!t.name&&!Zs.isChrome)return[t];var i,o,r=(i=t,o=null,n?""===i.name||Zs.isFirefox||(o=function(e){return!e.name||e===i||e.name!==i.name}):""!==i.name?o=function(e){return el(e)&&e.name===i.name}:Zs.isChrome&&(o=function(e){return el(e)&&!e.name}),o);return r&&(e=g.arrayUtils.filter(e,r)),e}function sl(e,t,n){var i,o,r,s,l,a,u,c,h=t?-1:1,f=g.domUtils.getTopSameDomainWindow(hu).document,d=(i=f,o=$s.documentActiveElementGetter.call(i),r=o&&nl(o),!(o&&r<0)),m=rl(m=g.domUtils.getFocusableElements(f,d),e,n),p=el(e),v=g.arrayUtils.indexOf(m,e);return(t?0===v:v===m.length-1)?!t&&e.tabIndex<0?g.arrayUtils.find(m,function(e){return 0===e.tabIndex}):n||!p?fu.body:m[m.length-1-v]:t&&-1===v?m[m.length-1]:(l=(s=m)[v+h],a=n,u=el(l)&&l.name&&!l.checked,c=null,a&&u&&(c=g.arrayUtils.find(s,function(e){return el(e)&&e.name===l.name&&e.checked})),c||l)}function ll(e){if(js(e))return e.toUpperCase().charCodeAt(0);var t=g.KEY_MAPS.shiftMap[e]?g.KEY_MAPS.shiftMap[e].charCodeAt(0):e.charCodeAt(0);return g.KEY_MAPS.symbolCharCodeToKeyCode[t]||t}var al={SPECIAL_KEYS:{capslock:"CapsLock",delete:"U+007F",end:"End",enter:"Enter",esc:"U+001B",home:"Home",ins:"Insert",pagedown:"PageDown",pageup:"PageUp",space:"U+0020",tab:"Tab",alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},LETTERS:{a:"U+0041",b:"U+0042",c:"U+0043",d:"U+0044",e:"U+0045",f:"U+0046",g:"U+0047",h:"U+0048",i:"U+0049",j:"U+004A",k:"U+004B",l:"U+004C",m:"U+004D",n:"U+004E",o:"U+004F",p:"U+0050",q:"U+0051",r:"U+0052",s:"U+0053",t:"U+0054",u:"U+0055",v:"U+0056",w:"U+0057",x:"U+0058",y:"U+0059",z:"U+005A"},SYMBOLS:{0:"U+0030",1:"U+0031",2:"U+0032",3:"U+0033",4:"U+0034",5:"U+0035",6:"U+0036",7:"U+0037",8:"U+0038",9:"U+0039"," ":"U+0020","!":"U+0021","@":"U+0040","#":"U+0023",$:"U+0024","%":"U+0025","^":"U+005E","*":"U+002A","(":"U+0028",")":"U+0029",_:"U+005F","|":"U+007C","\\":"U+005C","/":"U+002F","?":"U+003F",".":"U+002E",",":"U+002C","<":"U+003C",">":"U+003E","[":"U+005B","]":"U+005D","{":"U+007B","}":"U+007D","§":"U+00A7","±":"U+00B1","'":"U+0027",'"':"U+0022",":":"U+003A",";":"U+003B","`":"U+0060","~":"U+007E"}};function ul(e){return js(e)?al.LETTERS[e.toLowerCase()]:al.SYMBOLS[e]||al.SPECIAL_KEYS[e]||e}function cl(e,t,n){var i={};return"keyIdentifier"in KeyboardEvent.prototype&&(i.keyIdentifier=e?"":n),"key"in KeyboardEvent.prototype&&(i.key=t),i}var hl=m.utils.browser,fl=m.utils.extend,dl=m.eventSandbox.eventSimulator,ml=(pl._isKeyActivatedInputElement=function(e){return g.domUtils.isInputElement(e)&&/button|submit|reset|radio|checkbox/.test(e.type)},pl.prototype._type=function(e,t){var n,i=e!==this.storedActiveElement,o=!i,r=e,s=g.domUtils.isEditableElement(e),l=g.domUtils.isEditableElement(this.storedActiveElement);try{i&&(n=g.domUtils.isElementInIframe(e)===g.domUtils.isElementInIframe(this.storedActiveElement)||l,o=(!hl.isFirefox||l)&&(!hl.isWebKit||n))}catch(e){}o&&(!hl.isIE&&i&&l&&s&&(r=this.storedActiveElement),zs(r,t))},pl.prototype._addKeyPropertyToEventOptions=function(e){return fl(e,cl("keypress"===e.type,this.keyProperty,this.keyIdentifierProperty)),e},pl.prototype.down=function(e){this.storedActiveElement=ol(this.topSameDomainDocument),this.modifierKeyCode&&(e[this.sanitizedKey]=!0),e.shift&&this.isLetter&&(this.keyProperty=il(this.keyProperty));var t={keyCode:this.keyCode,type:"keydown"};return this._addKeyPropertyToEventOptions(t),dl.keydown(this.storedActiveElement,fl(t,e))},pl.prototype.press=function(e){if(!this.isChar&&!this.specialKeyCode)return!0;var t=ol(this.topSameDomainDocument),n=this.isChar?function(e,t){if("space"===e)return" ";if(t){if(js(e))return il(e);if(g.KEY_MAPS.reversedShiftMap[e])return g.KEY_MAPS.reversedShiftMap[e]}return e}(this.sanitizedKey,e.shift):null,i=this.specialKeyCode||n.charCodeAt(0),o=t!==this.storedActiveElement;if(hl.isWebKit&&o&&g.domUtils.isElementInIframe(t)!==g.domUtils.isElementInIframe(this.storedActiveElement))return!0;this.storedActiveElement=t;var r={keyCode:i,charCode:i,type:"keypress"};this._addKeyPropertyToEventOptions(r);var s=hl.isAndroid||dl.keypress(t,fl(r,e));if(!s)return s;t=ol(this.topSameDomainDocument),!n||e.ctrl||e.alt||this._type(t,n);var l=pl._isKeyActivatedInputElement(t),a=g.domUtils.isButtonElement(t),u=hl.isSafari&&0<=hl.compareVersions([hl.webkitVersion,"603.1.30"]);return hl.isFirefox||u||!l&&!a||"enter"!==this.sanitizedKey||t.click(),s},pl.prototype.up=function(e){this.modifierKeyCode&&(e[this.sanitizedKey]=!1);var t={keyCode:this.keyCode,type:"keyup"};this._addKeyPropertyToEventOptions(t);var n=dl.keyup(ol(this.topSameDomainDocument),fl(t,e)),i=ol(this.topSameDomainDocument);return!hl.isFirefox&&!hl.isSafari&&(!hl.isChrome||53<=hl.version)&&n&&"space"===this.sanitizedKey&&pl._isKeyActivatedInputElement(i)&&i.click(),n},Object.defineProperty(pl.prototype,"key",{get:function(){return this.sanitizedKey},enumerable:!1,configurable:!0}),pl);function pl(e,t){this.isLetter=js(e),this.isChar=1===e.length||"space"===e,this.sanitizedKey=g.getSanitizedKey(e),this.modifierKeyCode=g.KEY_MAPS.modifiers[this.sanitizedKey],this.specialKeyCode=g.KEY_MAPS.specialKeys[this.sanitizedKey],this.keyCode=null,this.keyIdentifierProperty=ul(t),this.topSameDomainDocument=g.domUtils.getTopSameDomainWindow(hu).document,this.keyProperty=g.KEY_MAPS.keyProperty[t]||t,this.isChar&&"space"!==e?this.keyCode=ll(this.sanitizedKey):this.modifierKeyCode?this.keyCode=this.modifierKeyCode:this.specialKeyCode&&(this.keyCode=this.specialKeyCode),this.storedActiveElement=null}var vl,gl={ctrlA:"ctrl+a",backspace:"backspace",delete:"delete",left:"left",right:"right",up:"up",down:"down",shiftLeft:"shift+left",shiftRight:"shift+right",shiftUp:"shift+up",shiftDown:"shift+down",shiftHome:"shift+home",shiftEnd:"shift+end",home:"home",end:"end",enter:"enter",tab:"tab",shiftTab:"shift+tab",esc:"esc"},El=m.Promise,yl=m.utils.browser,Sl=m.eventSandbox.eventSimulator,bl=m.eventSandbox.elementEditingWatcher,_l=y.textSelection,wl=y.eventUtils,Pl=y.domUtils,Cl=i.selectElement,Al=null,xl=null;function Tl(){xl=Al=null,wl.unbind(this,"blur",Tl,!0)}function Ul(e){var t,n,i,o;Pl.isTextAreaElement(e)&&(Al!==e&&(wl.bind(e,"blur",Tl,!0),Al=e),t=e,n=_l.hasInverseSelection(t),i=Pl.getTextAreaValue(t),o=n?_l.getSelectionStart(t):_l.getSelectionEnd(t),xl=i&&o?Pl.getTextareaIndentInLine(t,o):0)}function Ml(e,t){var n,i,o,r,s,l,a=Pl.getTextAreaValue(e);a&&(n=_l.getSelectionStart(e),i=_l.getSelectionEnd(e),o=_l.hasInverseSelection(e),s=(r=a.substring(0,o?n:i)).lastIndexOf("\n"),l=r.substring(0,s),null!==xl&&Al===e||Ul(e),s=l.lastIndexOf("\n"),Il(e,n,i,o,Math.min(s+1+xl,l.length),t))}function Dl(e,t){var n,i,o,r,s,l,a,u,c,h,f=Pl.getTextAreaValue(e);f&&(n=_l.getSelectionStart(e),i=_l.getSelectionEnd(e),u=(r=(o=_l.hasInverseSelection(e))?n:i)+(l=-1===(c=(s=f.substring(r)).indexOf("\n"))?s.length:c+1),h=-1===(c=(a=s.substring(l)).indexOf("\n"))?a.length:c,null!==xl&&Al===e||Ul(e),Il(e,n,i,o,u=Math.min(u+xl,u+h),t))}function Il(e,t,n,i,o,r){var s=null,l=null,l=r?(s=t!==n&&i?n:t,o):s=o;_l.select(e,s,l)}function kl(e,t,n){Pl.isInputElement(e)&&"number"===e.type&&("-"===t.charAt(0)&&"."===t.charAt(1)&&(t=t.substring(1)),"."===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1))),Pl.setElementValue(e,t),_l.select(e,n,n),Sl.input(e)}function Bl(e,t){var n,i,o,r,s,l,a,u;return Pl.isTextEditableElement(e)&&(n=_l.getSelectionStart(e),i=_l.getSelectionEnd(e),o=_l.hasInverseSelection(e),s=null,s=(r=!Pl.isTextAreaElement(e)||Pl.getTextareaLineNumberByPosition(e,n)===Pl.getTextareaLineNumberByPosition(e,i))?o?i:n:o?n:i,a=-1===(l=Pl.getElementValue(e).substring(0,s).lastIndexOf("\n"))?0:l+1,u=null,r?(u=t?s:a,_l.select(e,u,a)):o?_l.select(e,i,a):_l.select(e,n,a)),El.resolve()}function Ol(e,t){var n,i,o,r,s,l,a,u,c;return Pl.isTextEditableElement(e)&&(n=_l.getSelectionStart(e),i=_l.getSelectionEnd(e),o=_l.hasInverseSelection(e),s=null,u=s=(r=!Pl.isTextAreaElement(e)||Pl.getTextareaLineNumberByPosition(e,n)===Pl.getTextareaLineNumberByPosition(e,i))?o?i:n:o?n:i,c=null,u+=-1===(a=(l=Pl.getElementValue(e).substring(s)).indexOf("\n"))?l.length:a,r?(c=t?s:u,_l.select(e,c,u)):o?_l.select(e,i,u):_l.select(e,n,u)),El.resolve()}function Nl(e){return Bl(e,!0)}function Fl(e){return Ol(e,!0)}function Kl(e){return Pl.isRadioButtonElement(e)&&!yl.isFirefox}function Yl(e,t){return Ll(e,t,!1).then(function(e){e&&(e.checked=!0)})}function Ll(e,t,n){return void 0===n&&(n=!0),e?(Pl.isSelectElement(e)&&Cl.collapseOptionList(),i=e,o=t,r=n,new Qs(function(e){var t=sl(i,o,r);t?Js.focus(t,function(){return e(t)}):e()}).then(function(e){return e&&Pl.isTextEditableInput(e)&&_l.select(e),e})):El.resolve();var i,o,r}var Vl=((vl={})[gl.ctrlA]=function(e){return Pl.isEditableElement(e)&&_l.select(e),El.resolve()},vl[gl.backspace]=function(e){var t,n,i;return Pl.isTextEditableElementAndEditingAllowed(e)&&(t=_l.getSelectionStart(e),n=_l.getSelectionEnd(e),i=Pl.getElementValue(e).replace(/\r\n/g,"\n"),n===t?0<t&&kl(e,i.substring(0,t-1)+i.substring(n,i.length),t-1):kl(e,i.substring(0,t)+i.substring(n,i.length),t)),Pl.isContentEditableElement(e)&&_l.deleteSelectionContents(e),El.resolve()},vl[gl.delete]=function(e){var t,n,i;return Pl.isTextEditableElementAndEditingAllowed(e)&&(t=_l.getSelectionStart(e),n=_l.getSelectionEnd(e),i=Pl.getElementValue(e).replace(/\r\n/g,"\n"),n===t?t<i.length&&kl(e,i.substring(0,t)+i.substring(n+1,i.length),t):kl(e,i.substring(0,t)+i.substring(n,i.length),t)),Pl.isContentEditableElement(e)&&_l.deleteSelectionContents(e),El.resolve()},vl[gl.left]=function(e){var t,n,i,o,r=null;return Pl.isSelectElement(e)&&Cl.switchOptionsByKeys(e,"left"),Kl(e)?Yl(e,!0):(Pl.isTextEditableElement(e)&&(t=(r=_l.getSelectionStart(e)||0)===_l.getSelectionEnd(e)?r-1:r,_l.select(e,t,t),Ul(e)),Pl.isContentEditableElement(e)&&(r=_l.getSelectionStart(e))!==_l.getSelectionEnd(e)&&(n=_l.getSelectionByElement(e),o={node:(i=_l.hasInverseSelectionContentEditable(e))?n.focusNode:n.anchorNode,offset:i?n.focusOffset:n.anchorOffset},_l.selectByNodesAndOffsets(o,o,!0)),El.resolve())},vl[gl.right]=function(e){var t,n,i,o,r=null,s=null;return Pl.isSelectElement(e)&&Cl.switchOptionsByKeys(e,"right"),Kl(e)?Yl(e,!1):(Pl.isTextEditableElement(e)&&(t=(r=_l.getSelectionStart(e))===(s=_l.getSelectionEnd(e))?s+1:s,r===Pl.getElementValue(e).length&&(t=r),_l.select(e,t,t),Ul(e)),Pl.isContentEditableElement(e)&&(r=_l.getSelectionStart(e))!==(s=_l.getSelectionEnd(e))&&(n=_l.getSelectionByElement(e),o={node:(i=_l.hasInverseSelectionContentEditable(e))?n.anchorNode:n.focusNode,offset:i?n.anchorOffset:n.focusOffset},_l.selectByNodesAndOffsets(o,o,!0)),El.resolve())},vl[gl.up]=function(e){return Pl.isSelectElement(e)&&Cl.switchOptionsByKeys(e,"up"),Kl(e)?Yl(e,!0):yl.isWebKit&&Pl.isInputElement(e)?Bl(e):(Pl.isTextAreaElement(e)&&Ml(e,!1),El.resolve())},vl[gl.down]=function(e){return Pl.isSelectElement(e)&&Cl.switchOptionsByKeys(e,"down"),Kl(e)?Yl(e,!1):yl.isWebKit&&Pl.isInputElement(e)?Ol(e):(Pl.isTextAreaElement(e)&&Dl(e,!1),El.resolve())},vl[gl.shiftLeft]=function(e){var t,n;return Pl.isTextEditableElement(e)&&((t=_l.getSelectionStart(e))===(n=_l.getSelectionEnd(e))||_l.hasInverseSelection(e)?_l.select(e,n,Math.max(t-1,0)):_l.select(e,t,Math.max(n-1,0)),Ul(e)),El.resolve()},vl[gl.shiftRight]=function(e){var t,n,i;return Pl.isTextEditableElement(e)&&(t=_l.getSelectionStart(e),n=_l.getSelectionEnd(e),i=Pl.getElementValue(e).length,t!==n&&_l.hasInverseSelection(e)?_l.select(e,n,Math.min(t+1,i)):_l.select(e,t,Math.min(n+1,i)),Ul(e)),El.resolve()},vl[gl.shiftUp]=function(e){return yl.isWebKit&&Pl.isInputElement(e)?Nl(e):(Pl.isTextAreaElement(e)&&Ml(e,!0),El.resolve())},vl[gl.shiftDown]=function(e){return yl.isWebKit&&Pl.isInputElement(e)?Fl(e):(Pl.isTextAreaElement(e)&&Dl(e,!0),El.resolve())},vl[gl.shiftHome]=Nl,vl[gl.shiftEnd]=Fl,vl[gl.home]=Bl,vl[gl.end]=Ol,vl[gl.enter]=function(e){var t,n,i,o,r,s;return Pl.isSelectElement(e)&&Cl.collapseOptionList(),Pl.isInputElement(e)?(yl.isIE||bl.processElementChanging(e),(t=Pl.getParents(e,"form")[0])&&function(e,t){var n=e.querySelectorAll("input, button"),i=null,o=null;for(o=0;o<n.length;o++)if(!i&&"submit"===n[o].type&&!n[o].disabled){i=n[o];break}if(i)Sl.click(i);else if(Pl.blocksImplicitSubmission(t)){for(var r=e.getElementsByTagName("input"),s=[],o=0;o<r.length;o++)Pl.blocksImplicitSubmission(r[o])&&s.push(r[o]);1===s.length&&s[0]===t&&t.validity.valid&&Sl.submit(e)&&e.submit()}}(t,e)):Pl.isTextAreaElement(e)?(n=_l.getSelectionStart(e),o=(i=Pl.getTextAreaValue(e)).substring(0,n),r=i.substring(n),s=n+1,kl(e,o+String.fromCharCode(10)+r,s)):e.tagName&&Pl.isAnchorElement(e)&&Sl.click(e),El.resolve()},vl[gl.tab]=function(e){return Ll(e,!1)},vl[gl.shiftTab]=function(e){return Ll(e,!0)},vl[gl.esc]=function(e){return Pl.isSelectElement(e)&&Cl.collapseOptionList(),El.resolve()},vl),Xl=m.Promise,Rl=m.utils.browser,Wl=m.eventSandbox.message,Hl=m.nativeMethods,Gl="automation|press|request",ql="automation|press|response";Wl.on(Wl.SERVICE_MSG_RECEIVED_EVENT,function(e){e.message.cmd===Gl&&(m.on(m.EVENTS.beforeUnload,function(){return Wl.sendServiceMsg({cmd:ql},e.source)}),new zl(e.message.keyCombinations,e.message.options).run().then(function(){return Wl.sendServiceMsg({cmd:ql},e.source)}))});var zl=(jl._getKeyPressSimulators=function(e){var t=function(e){for(var t=e.slice(),n=0;n<e.length;n++){var i=e[n];if("shift"===i.toLowerCase()){var o=e[n+1];if(!o)continue;g.KEY_MAPS.shiftMap[o]?e[n+1]=g.KEY_MAPS.shiftMap[o]:g.KEY_MAPS.reversedShiftMap[o]&&(t[n+1]=g.KEY_MAPS.reversedShiftMap[o])}!g.KEY_MAPS.shiftMap[i]||e[n-1]&&"shift"===e[n-1].toLowerCase()||(e[n]=g.KEY_MAPS.shiftMap[i],e.splice(n,0,"shift"),t.splice(n,0,"shift"),n++)}return{actualKeys:e,eventKeyProperties:t}}(g.getKeyArray(e)),n=t.actualKeys,i=t.eventKeyProperties;return g.arrayUtils.map(n,function(e,t){return new ml(e,i[t])})},jl._getShortcuts=function(e){for(var t=g.getKeyArray(e.toLowerCase()),n=[],i=[],o=[],r=0;r<t.length;r++)for(i.push(t[r]),o=i.slice();o.length;){var s=o.join("+");Vl[s]?(n.push(s),i=o=[]):o.shift()}return n},jl._getShortcutHandlers=function(e){for(var t,n,i,o=jl._getShortcuts(e.toLowerCase()),r={},s="",l=0;l<o.length;l++)t=o[l],n=e.indexOf(t),i=t.length,r[s+=e.substring(0,n+i)]=Vl[t],e=e.substring(n+i);return r},jl.prototype._down=function(e){this.pressedKeyString+=(this.pressedKeyString?"+":"")+e.key;var t=!e.down(this.modifiersState);return Xl.resolve(t)},jl.prototype._press=function(e,t){var n=this;if(t&&!this.isSelectElement)return g.delay(this.automationSettings.keyActionStepDelay);var i=this.shortcutHandlers[this.pressedKeyString],o=!1;return i&&!Rl.isFirefox&&"enter"!==e.key||(o=!e.press(this.modifiersState)),o&&!this.isSelectElement||!i?g.delay(this.automationSettings.keyActionStepDelay):i(ol(this.topSameDomainDocument)).then(function(){return g.delay(n.automationSettings.keyActionStepDelay)})},jl.prototype._up=function(e){return e.up(this.modifiersState),g.delay(this.automationSettings.keyActionStepDelay)},jl.prototype._runCombination=function(e){var n=this;this.modifiersState={ctrl:!1,alt:!1,shift:!1,meta:!1},this.isSelectElement=g.domUtils.isSelectElement(ol(this.topSameDomainDocument)),this.pressedKeyString="",this.shortcutHandlers=jl._getShortcutHandlers(e);var t=jl._getKeyPressSimulators(e);return g.promiseUtils.each(t,function(t){return n._down(t).then(function(e){return n._press(t,e)})}).then(function(){return g.arrayUtils.reverse(t),g.promiseUtils.each(t,function(e){return n._up(e)})})},jl.prototype.run=function(){var t=this,e=g.domUtils.getActiveElement(),n=g.domUtils.isIframeElement(e);if(!ue(hu)&&n&&Hl.contentWindowGetter.call(e)){var i={cmd:Gl,keyCombinations:this.keyCombinations,options:this.options};return g.sendRequestToFrame(i,ql,Hl.contentWindowGetter.call(e))}return g.promiseUtils.each(this.keyCombinations,function(e){return t._runCombination(e).then(function(){return g.delay(t.automationSettings.keyActionStepDelay)})})},jl);function jl(e,t){this.keyCombinations=e,this.isSelectElement=!1,this.pressedKeyString="",this.modifiersState=null,this.shortcutHandlers=null,this.topSameDomainDocument=g.domUtils.getTopSameDomainWindow(hu).document,this.automationSettings=new Se(t.speed),this.options=t}var $l,Zl=m.Promise,Jl=m.utils.extend,Ql=m.utils.browser,ea=m.eventSandbox.eventSimulator,ta=y.domUtils,na=y.eventUtils,ia=y.delay,oa=(t(ra,$l=Ao),ra.prototype._mousedown=function(e){var t=this;return so.rightButtonDown().then(function(){return t.eventState.activeElementBeforeMouseDown=ta.getActiveElement(),t.eventState.simulateDefaultBehavior=ea.mousedown(e.element,e.options),t._focus(e)})},ra.prototype._focus=function(e){return!1===this.simulateDefaultBehavior?er():jo(ta.isContentEditableElement(this.element)?this.element:e.element,!Ql.isIE||this.eventState.activeElementBeforeMouseDown===ta.getActiveElement(),this.caretPos).then(er)},ra.prototype._mouseup=function(t){var e=this;return so.buttonUp().then(function(){return e._getElementForEvent(t)}).then(function(e){return ea.mouseup(e,t.options)})},ra.prototype._contextmenu=function(t){return this._getElementForEvent(t).then(function(e){ea.contextmenu(e,t.options),ta.isElementFocusable(e)||Zo(e)})},ra.prototype.run=function(e){var o=this,r=null;return this._ensureElement(e).then(function(e){var t=e.element,n=e.clientPoint,i=e.devicePoint;return r={point:n,element:t,options:Jl({clientX:n.x,clientY:n.y,screenX:i.x,screenY:i.y,button:na.BUTTON.right},o.modifiers)},Zl.all([ia(o.automationSettings.mouseActionStepDelay),o._mousedown(r)])}).then(function(){return o._mouseup(r)}).then(function(){return o._contextmenu(r)})},ra);function ra(e,t){var n=$l.call(this,e,t)||this;return n.modifiers=t.modifiers,n.caretPos=t.caretPos,n.eventState={simulateDefaultBehavior:!0,activeElementBeforeMouseDown:null},n}var sa=m.utils.browser,la=y.domUtils,aa=y.positionUtils,ua=y.styleUtils,ca=y.contentEditable,ha=y.arrayUtils,fa=["direction","font-family","font-size","font-size-adjust","font-variant","font-weight","font-style","letter-spacing","line-height","text-align","text-indent","text-transform","word-wrap","word-spacing","padding-top","padding-left","padding-right","padding-bottom","margin-top","margin-left","margin-right","margin-bottom","border-top-width","border-left-width","border-right-width","border-bottom-width"];function da(e,t){var n,i,o,r,s,l=ua.getBordersWidth(e),a=aa.getOffsetPosition(e),u=e.scrollHeight||e.getBoundingClientRect().height,c=Math.ceil(t.left),h=Math.ceil(t.top),f=Math.floor(t.bottom);return la.isTextAreaElement(e)||(i=(n=aa.offsetToClientCoords({x:a.left,y:a.top})).x+l.left+1,o=n.y+l.top+1,r=n.y+l.top+l.bottom+u,s=n.y+l.top+u-1,c=Math.ceil(c<=n.x?i:t.left),h=Math.ceil(h<=n.y?o:t.top),f=Math.floor(r<=f?s:t.bottom)),{left:c,top:h,bottom:f}}function ma(e){var t=ua.getElementScroll(fu);return{left:e.left+t.left,top:e.top+t.top,bottom:e.bottom+t.top}}function pa(e,t){var n=e.getBoundingClientRect(),i=function(t){var e,n,i,o=fu.body,r=aa.getOffsetPosition(t),s=ua.getElementMargin(t),l=r.top-s.top,a=r.left-s.left,u=fu.createElement("div"),c="white-space:pre-wrap;border-style:solid;";return"absolute"===ua.get(o,"position")&&(e=ua.getElementMargin(o),n=ua.get(o,"left"),i=ua.get(o,"top"),a-=e.left+(parseInt(n.replace("px",""),10)||0),l-=e.top+(parseInt(i.replace("px",""),10)||0)),ha.forEach(fa,function(e){c+=e+":"+ua.get(t,e)+";"}),ua.set(u,{cssText:c,position:"absolute",left:a+"px",top:l+"px",width:t.scrollWidth+"px",height:t.scrollHeight+"px"}),m.nativeMethods.nodeTextContentSetter.call(u,la.getElementValue(t)+" "),o.appendChild(u),u}(e),o=null,r=e.getBoundingClientRect(),s=r.top-n.top,l=r.left-n.left,a=la.getElementValue(e).length;try{var u=fu.createRange();u.setStart(m.nativeMethods.nodeFirstChildGetter.call(i),Math.min(t,a)),u.setEnd(m.nativeMethods.nodeFirstChildGetter.call(i),Math.min(t+1,a+1)),la.isTextAreaElement(e)&&(0!==(o=u.getBoundingClientRect()).width||0!==o.height)||(o=u.getClientRects()[0])}catch(e){o=null}return la.remove(i),o?{width:o.width,height:o.height,top:o.top-s,bottom:o.bottom-s,left:o.left-l,right:o.right-l}:null}function va(e,t){var n,i,o,r,s,l,a=null;return(a=la.isContentEditableElement(e)?(o=e,r=t,s=la.findDocument(o).createRange(),l=ca.calculateNodeAndOffsetByPosition(o,r),s.setStart(l.node,Math.min(l.offset,l.node.length)),s.setEnd(l.node,Math.min(l.offset,l.node.length)),s.getClientRects()[0]):"function"==typeof e.createTextRange?(n=t,(i=e.createTextRange()).collapse(!0),i.moveStart("character",n),i.moveEnd("character",n),i.collapse(!0),i.getBoundingClientRect()):pa(e,t))?{x:(a=ma(a=da(e,a))).left,y:Math.floor(a.top+(a.bottom-a.top)/2)}:null}function ga(e,t){var n=la.isTextEditableElement(e),i=la.isContentEditableElement(e);return n&&0<la.getElementValue(e).length||i&&ca.getContentEditableValue(e).length?va(e,t):aa.findCenter(e)}function Ea(e,t,n){var i=la.findDocument(e).createRange();i.setStart(t,Math.min(n,t.length)),i.setEnd(t,Math.min(n,t.length));var o=i.getClientRects()[0];return o?{x:(o=ma(da(e,o))).left,y:Math.floor(o.top+(o.bottom-o.top)/2)}:null}var ya,Sa=m.Promise,ba=m.utils.browser,_a=m.utils.featureDetection,wa=m.eventSandbox.eventSimulator,Pa=m.eventSandbox.focusBlur,Ca=y.contentEditable,Aa=y.domUtils,xa=y.positionUtils,Ta=y.eventUtils,Ua=y.delay,Ma=(t(Da,ya=Ao),Da._calculateEventArguments=function(e){var t=xa.offsetToClientCoords(e);return Ee(t).then(function(e){if(!e)throw new Error(ye.elementIsInvisibleError);return{element:e,options:{clientX:t.x,clientY:t.y}}})},Da.prototype._move=function(e){var t=this,n=e.element,i=e.offsetX,o=e.offsetY,r=e.speed,s=new Xi({offsetX:i,offsetY:o,speed:r},!1);return po.create(n,hu,so,s).then(function(e){return e.run()}).then(function(){return Ua(t.automationSettings.mouseActionStepDelay)})},Da.prototype._bindMousedownHandler=function(){var t=this,n=function(e){t.eventState.mousedownPrevented=e.defaultPrevented,Ta.preventDefault(e),Ta.unbind(t.element,"mousedown",n)};Ta.bind(this.element,"mousedown",n)},Da.prototype._calculateAbsoluteStartPoint=function(){throw new Error("Not implemented")},Da.prototype._calculateAbsoluteEndPoint=function(){throw new Error("Not implemented")},Da.prototype._moveToPoint=function(e){!function(e,t){if(la.isEditableElement(e)){var n=la.isTextAreaElement(e);if(!la.isInputElement(e)||!(sa.isFirefox||sa.isIE&&10<sa.version)){var i=aa.getOffsetPosition(e),o=ua.getBordersWidth(e),r=ua.getElementScroll(e),s=t.x-i.left-o.left,l=t.y-i.top-o.top,a=null;if(n)return l<r.top&&(a=l),l>e.clientHeight+r.top&&(a=l-e.clientHeight),null!==a&&ua.setScrollTop(e,Math.round(a));s<r.left&&(a=s),s>e.clientWidth+r.left&&(a=s-e.clientWidth),null!==a&&ua.setScrollLeft(e,Math.round(a))}}}(this.element,e),this.clientPoint=function(e,t){var n=la.isTextEditableElement(e),i=la.isInputElement(e);if(!n&&!la.isContentEditableElement(e))return t;var o=aa.getOffsetPosition(e),r=ua.getBordersWidth(e),s=ua.getElementScroll(e),l=o.left+r.left+e.clientWidth;return i&&n&&(sa.isFirefox||sa.isIE&&10<sa.version)?{x:Math.min(t.x,l),y:t.y}:{x:t.x-s.left,y:t.y-s.top}}(this.element,e);var t={element:fu.documentElement,offsetX:this.clientPoint.x,offsetY:this.clientPoint.y,speed:this.speed};return this._move(t)},Da.prototype._mousedown=function(){var n=this;return so.leftButtonDown().then(function(){return Da._calculateEventArguments(n.clientPoint)}).then(function(e){n.eventArgs=e;var t=(ba.isWebKit||ba.isIE)&&Aa.isSelectElement(n.element);return t&&n._bindMousedownHandler(),n.eventState.simulateDefaultBehavior=wa[n.downEvent](n.eventArgs.element,n.eventArgs.options),!1===n.eventState.simulateDefaultBehavior&&(n.eventState.simulateDefaultBehavior=t&&!n.eventState.mousedownPrevented),n._focus()})},Da.prototype._focus=function(){var n=this;return new Sa(function(e){var t=Aa.isContentEditableElement(n.element)?Ca.findContentEditableParent(n.element):n.element;Pa.focus(t,e,!1,!0)})},Da.prototype._setSelection=function(){throw new Error("Not implemented")},Da.prototype._mouseup=function(){var t=this;return so.buttonUp().then(function(){return t._setSelection(),Da._calculateEventArguments(t.clientPoint)}).then(function(e){t.eventArgs=e,wa[t.upEvent](t.eventArgs.element,t.eventArgs.options)})},Da.prototype.run=function(){var e=this;return this.absoluteStartPoint=this._calculateAbsoluteStartPoint(),this.absoluteEndPoint=this._calculateAbsoluteEndPoint(),this._moveToPoint(this.absoluteStartPoint).then(function(){return e._mousedown()}).then(function(){return e._moveToPoint(e.absoluteEndPoint)}).then(function(){return e._mouseup()})},Da);function Da(e,t){var n=ya.call(this,e,t)||this;return n.absoluteStartPoint=null,n.absoluteEndPoint=null,n.clientPoint=null,n.speed=t.speed,n.downEvent=_a.isTouchDevice?"touchstart":"mousedown",n.upEvent=_a.isTouchDevice?"touchend":"mouseup",n.eventArgs={options:null,element:null},n.eventState={mousedownPrevented:!1,simulateDefaultBehavior:!0},n}var Ia,ka=y.textSelection,Ba=y.domUtils,Oa=y.positionUtils,Na=(t(Fa,Ia=Ma),Fa.prototype._calculateAbsoluteStartPoint=function(){return ga(this.element,this.startPos)||Oa.findCenter(this.element)},Fa.prototype._calculateAbsoluteEndPoint=function(){var e=ga(this.element,this.endPos);return e||(Ba.isContentEditableElement(this.element)?function(e,t,n){for(var i=n<t?1:-1,o=n,r=null;o!==t&&!(r=va(e,o+=i)););return r=r||va(e,t)||aa.findCenter(e)}(this.element,this.startPos,this.endPos):Oa.findCenter(this.element))},Fa.prototype._setSelection=function(){var e=Ba.isTextEditableElement(this.element),t=Ba.isContentEditableElement(this.element);(e||t)&&!1!==this.eventState.simulateDefaultBehavior&&ka.select(this.element,this.startPos,this.endPos)},Fa.prototype.run=function(e){var t=this;return this._ensureElement(e).then(function(){return Ia.prototype.run.call(t)})},Fa);function Fa(e,t,n,i){var o=Ia.call(this,e,i)||this;return o.startPos=t,o.endPos=n,o}var Ka,Ya=y.textSelection,La=y.contentEditable,Va=y.positionUtils,Xa=(t(Ra,Ka=Ma),Ra.prototype._calculateAbsoluteStartPoint=function(){return Ea(this.element,this.startNode,this.startOffset)||Va.findCenter(this.element)},Ra.prototype._calculateAbsoluteEndPoint=function(){return Ea(this.element,this.endNode,this.endOffset)||Va.findCenter(this.element)},Ra.prototype._setSelection=function(){var e,t;!1!==this.eventState.simulateDefaultBehavior&&(e={node:this.startNode,offset:this.startOffset},t={node:this.endNode,offset:this.endOffset},Ya.selectByNodesAndOffsets(e,t,!0))},Ra);function Ra(e,t,n){var i=Ka.call(this,La.getNearestCommonAncestor(e,t),n)||this,o=La.getFirstVisiblePosition(e),r=La.getLastVisiblePosition(t),s={node:e,offset:o},l={node:t,offset:r},a=La.calculatePositionByNodeAndOffset(i.element,s);return La.calculatePositionByNodeAndOffset(i.element,l)<a&&(o=La.getLastVisiblePosition(e),r=La.getFirstVisiblePosition(t)),s=La.calculateNodeAndOffsetByPosition(e,o),l=La.calculateNodeAndOffsetByPosition(t,r),i.startNode=s.node,i.startOffset=s.offset,i.endNode=l.node,i.endOffset=l.offset,i}var Wa=m.Promise,Ha=m.utils.extend,Ga=m.utils.browser,qa=m.eventSandbox.eventSimulator,za=m.eventSandbox.elementEditingWatcher,ja=y.domUtils,$a=y.promiseUtils,Za=y.contentEditable,Ja=y.textSelection,Qa=y.delay,eu=y.KEY_MAPS.specialKeys,tu=(nu.findTextEditableChild=function(e){var t=null;if(!ja.isEditableElement(e))for(var n=e.querySelectorAll("*"),i=0;i<n.length;i++)if(ja.isTextEditableElementAndEditingAllowed(n[i])){t=n[i];break}return t},nu.prototype._calculateEventArguments=function(e){var t=ja.getActiveElement(),n=ja.isContentEditableElement(this.element),i=this.eventArgs.element||this.element;n||t===i||(i=nu.findTextEditableChild(t)||t);var o=Ha({keyCode:e?this.currentCharCode:this.currentKeyCode},this.modifiers);return e&&(o.charCode=this.currentCharCode),Ha(o,cl(e,this.currentKey,this.currentKeyIdentifier)),{element:i,options:o}},nu.prototype._calculateTargetElement=function(){var e=ja.getActiveElement(),t=ja.isContentEditableElement(this.element);if(t){if(e!==Za.findContentEditableParent(this.element))return void(this.eventState.skipType=!0)}else if(e!==this.element)return void(this.eventState.skipType=!0);this.element=t?this.element:e},nu.prototype._click=function(e){var t,n=this,i=ja.getActiveElement(),o=ja.isTextEditableElementAndEditingAllowed(this.element),r=ja.isContentEditableElement(this.element);if(i===this.element)return o&&za.watchElementEditing(this.element),(o||r)&&(t=Ja.getSelectionStart(this.element),isNaN(parseInt(this.caretPos,10))||this.caretPos===t||Ja.select(this.element,this.caretPos,this.caretPos)),Wa.resolve();var s=le(this.element),l=s.offsetX,a=s.offsetY,u=new Yi({offsetX:this.elementChanged?l:this.offsetX,offsetY:this.elementChanged?a:this.offsetY,speed:this.speed,caretPos:this.caretPos,modifiers:this.modifiers});return new kr(this.element,u).run(e).then(function(){return Qa(n.automationSettings.mouseActionStepDelay)})},nu.prototype._type=function(){var e=this;if(this.eventState.skipType)return Wa.resolve();var t=ja.isContentEditableElement(this.element);return this.replace&&(ja.isTextEditableElementAndEditingAllowed(this.element)?Ja.select(this.element):t&&Ja.deleteSelectionContents(this.element,!0)),$a.whilst(function(){return!e._isTypingFinished()},function(){return e._typingStep()})},nu.prototype._isTypingFinished=function(){return this.currentPos===this.typingText.length},nu.prototype._typingStep=function(){var e=this.typingText.charAt(this.currentPos);return this.currentKeyCode=ll(e),this.currentCharCode=this.typingText.charCodeAt(this.currentPos),this.currentKey=this.currentKeyCode===eu.enter?"Enter":e,this.currentKeyIdentifier=ul(this.currentKey),this.ignoreChangeEvent=ja.getElementValue(this.element)===za.getElementSavedValue(this.element),this._keydown(),this._keypress(),this._keyup()},nu.prototype._keydown=function(){this.eventArgs=this._calculateEventArguments(),this.eventState.simulateKeypress=qa.keydown(this.eventArgs.element,this.eventArgs.options)},nu.prototype._keypress=function(){!1!==this.eventState.simulateKeypress&&(this.eventArgs=this._calculateEventArguments(!0),this.eventState.simulateTypeChar=Ga.isAndroid||qa.keypress(this.eventArgs.element,this.eventArgs.options))},nu.prototype._keyup=function(){var e=this,t=this.eventArgs.element;this.eventArgs=this._calculateEventArguments();var n=ja.isTextEditableElement(this.element),i=ja.isContentEditableElement(this.element),o=this.paste||!n&&!i;return Wa.resolve().then(function(){return o?e._typeAllText(t):e._typeChar(t)}).then(function(){qa.keyup(e.eventArgs.element,e.eventArgs.options),o?e.currentPos=e.typingText.length:e.currentPos++})},nu.prototype._typeChar=function(e){if(!1===this.eventState.simulateKeypress||!1===this.eventState.simulateTypeChar)return this.ignoreChangeEvent&&za.restartWatchingElementEditing(e),Qa(this.automationSettings.keyActionStepDelay);var t=this.typingText.charAt(this.currentPos),n=/^\d$/.test(t),i=0===this.currentPos?null:this.typingText.charAt(this.currentPos-1);if(ja.isInputElement(e)&&"number"===e.type){var o=Ja.getSelectionStart(e),r=ja.getInputValue(e).length,s=/^\d/.test(this.typingText);if(!n&&(s||!("."===t||"-"===t&&r)||0!==o))return Qa(this.automationSettings.keyActionStepDelay);n&&("."===i||"-"===i&&!r)&&(t=i+t)}return zs(e,t,null),Qa(this.automationSettings.keyActionStepDelay)},nu.prototype._typeAllText=function(e){return zs(e,this.typingText,this.caretPos),Qa(this.automationSettings.keyActionStepDelay)},nu.prototype.run=function(e){var t=this;return this._click(e).then(function(){return t._calculateTargetElement()}).then(function(){return t._type()})},nu);function nu(e,t,n){this.element=nu.findTextEditableChild(e)||e,this.typingText=t.toString(),this.modifiers=n.modifiers,this.caretPos=n.caretPos,this.replace=n.replace,this.paste=n.paste,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=n.speed,this.automationSettings=new Se(this.speed),this.elementChanged=e!==this.element,this.currentPos=0,this.currentKeyCode=null,this.currentCharCode=null,this.currentKey=null,this.currentKeyIdentifier=null,this.ignoreChangeEvent=!0,this.eventArgs={options:null,element:null},this.eventState={skipType:!1,simulateKeypress:!0,simulateTypeChar:!0}}var iu=(ou.prototype.run=function(){var i=this;return e.doUpload(this.element,this.paths).then(function(e){if(e.length){var t=g.arrayUtils.map(e,function(e){return e.path}),n=g.arrayUtils.reduce(e,function(e,t){return e.concat(t.resolvedPaths)},[]);throw i.createError(t,n)}})},ou);function ou(e,t,n){this.element=e,this.paths=t,this.createError=n}var ru=y.domUtils,su=y.contentEditable,lu={};lu.DispatchEvent=te,lu.SetScroll=Mo,lu.ScrollIntoView=ko,lu.Click=kr,lu.SelectChildClick=Gr,lu.DblClick=ts,lu.DragToOffset=Cs,lu.DragToElement=Us,lu.Hover=Is,lu.Press=zl,lu.RClick=oa,lu.SelectText=Na,lu.SelectEditableContent=Xa,lu.Type=tu,lu.Upload=iu,lu.MouseOptions=Ni,lu.ClickOptions=Yi,lu.TypeOptions=ji,lu.ERROR_TYPES=ye,lu.AutomationSettings=Se,lu.getOffsetOptions=ae,lu.calculateSelectTextArguments=function(e,t){void 0===t&&(t={});var n,i,o,r,s,l,a,u,c,h,f,d=ru.isTextEditableElement(e),m=d?0:su.getFirstVisiblePosition(e),p=d?ru.getElementValue(e).length:su.getLastVisiblePosition(e),v=t.startPos?Math.min(t.startPos,p):m,g=void 0===t.endPos||null===t.endPos?p:Math.min(t.endPos,p);return void 0!==t.offset?(g=0<=t.offset?Math.min(t.offset,g):(v=g,Math.max(0,g+t.offset)),{startPos:v,endPos:g}):void 0!==t.startLine?(n=e,i=t,o=ru.getTextAreaValue(n),r=o&&o.length?o.split("\n"):[],s=r.length-1,l=i.startLine?Math.min(i.startLine,s):0,a=r[l]?r[l].length:0,u=i.startPos?Math.min(i.startPos,a):0,c=void 0===i.endLine||null===i.endLine?s:Math.min(i.endLine,s),h=r[c]?r[c].length:0,f=void 0===i.endPos||null===i.endPos?h:Math.min(i.endPos,h),{startPos:ru.getTextareaPositionByLineAndOffset(n,l,0)+u,endPos:ru.getTextareaPositionByLineAndOffset(n,c,0)+f}):{startPos:v,endPos:g}},lu.cursor=so,lu.getNextFocusableElement=sl,lu.SHORTCUT_TYPE=gl,lu.getSelectionCoordinatesByPosition=ga,lu.getElementFromPoint=Ee;var au=m.nativeMethods,uu=m.EVENTS.evalIframeScript;au.objectDefineProperty(hu,"%testCafeAutomation%",{configurable:!0,value:lu}),m.on(uu,function(e){return cu(au.contentWindowGetter.call(e.iframe))})}(hu["%hammerhead%"],hu["%testCafeCore%"],hu["%testCafeUI%"],hu["%hammerhead%"].Promise)}(window);